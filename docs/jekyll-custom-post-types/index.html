<!doctype html>
<html lang="en-US">
  <head>
    
    <meta charset="utf-8">


    <!-- favicons -->
    <link rel="apple-touch-icon"      sizes="57x57"   href="/assets/images/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon"      sizes="60x60"   href="/assets/images/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon"      sizes="72x72"   href="/assets/images/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon"      sizes="76x76"   href="/assets/images/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon"      sizes="114x114" href="/assets/images/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon"      sizes="120x120" href="/assets/images/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon"      sizes="144x144" href="/assets/images/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon"      sizes="152x152" href="/assets/images/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon"      sizes="180x180" href="/assets/images/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/images/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32"   href="/assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96"   href="/assets/images/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16"   href="/assets/images/favicon/favicon-16x16.png">
    <link rel="manifest"                              href="/assets/images/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/images/favicon/ms-icon-144x144.png">
    <meta name="theme-color"             content="#ffffff">

    <link rel="stylesheet" href="/assets/css/style.css">
    
    <!-- force mobile to use mobile viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>WP Custom Post Types but Free | Monjibram</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="WP Custom Post Types but Free" />
<meta name="author" content="Benji" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Sometimes you’re good at more than one type of thing. That’s OK, you’re human. We like to categorize things and study them logically to distinguish them from each other. We argue about definitions. We like tables. We like lists. We make Custom Types for everything." />
<meta property="og:description" content="Sometimes you’re good at more than one type of thing. That’s OK, you’re human. We like to categorize things and study them logically to distinguish them from each other. We argue about definitions. We like tables. We like lists. We make Custom Types for everything." />
<link rel="canonical" href="http://localhost:4000/jekyll-custom-post-types/" />
<meta property="og:url" content="http://localhost:4000/jekyll-custom-post-types/" />
<meta property="og:site_name" content="Monjibram" />
<meta property="og:image" content="http://localhost:4000/assets/images/custom-food-types.svg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-27T00:00:00-04:00" />
<meta property="fb:admins" content="THEimmortal" />
<meta property="article:publisher" content="THEimmortal" />
<meta name="google-site-verification" content="OTG5c_uywRHQgQpvdcwgCYY02h8ofndgJq_kGPt1l_I" />
<script type="application/ld+json">
{"image":"http://localhost:4000/assets/images/custom-food-types.svg","description":"Sometimes you’re good at more than one type of thing. That’s OK, you’re human. We like to categorize things and study them logically to distinguish them from each other. We argue about definitions. We like tables. We like lists. We make Custom Types for everything.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/Benji.jpg"},"name":"Benji"},"@type":"BlogPosting","url":"http://localhost:4000/jekyll-custom-post-types/","headline":"WP Custom Post Types but Free","dateModified":"2020-06-27T00:00:00-04:00","datePublished":"2020-06-27T00:00:00-04:00","author":{"@type":"Person","name":"Benji"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/jekyll-custom-post-types/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta property="og:type"             content="website" />
    <meta property="og:image:type"       content="image/jpeg" />
    <meta property="og:image:alt"        content="Benjamin Kostenbader" />
  </head>
  <body>
    <section class="main-grid">
      <nav>

  <a href="/index.html" class="navbar-site-emblem">
    <i class="fa fa-behance-square fa-lg"></i>nji
  </a>
  <!-- If PC/Large Resolution -->
  <div class="big-nav">
    <div class="nav-links"><a href="/blog/">     Blog</a></div>
    <div class="nav-links"><a href="/portfolio/">Portfolio</a></div>
    <div class="nav-links"><a href="/resume/">   Resume</a></div>
    <div class="nav-links"><a href="/contact/">  Contact</a></div>
  </div>
  
</nav>



  <!-- If Mobile/Tablet -->
  <label class="dropdown">
    <input type="checkbox" class="invisicheck" name="" id="pagestopper" style="display: none;">
    <div class="dropdown-btn" id="">
      <span></span><span></span><span></span>
    </div>
    <ul class="dropdown-nav">
      <!-- <div class="fa fa-align-justify fa-lg dropdown-nav"></div> -->
      <!-- <li class="drop-btn"><a href="/">    Home</a></li> -->
      <li class="drop-btn"><a href="/blog/">    Blog</a></li>
      <li class="drop-btn"><a href="/portfolio/">Portfolio</a></li>
      <li class="drop-btn"><a href="/resume/">      Resume</a></li>
      <li class="drop-btn"><a href="/contact/">    Contact</a></li>
    </ul>
  </label>
      <div class="inner">
        <div class="blog-post">
  <article class="article">
    <div class='blog-info'>
      <div class='demos'>
        
        
          <div class="cat" href="blog/categories/#Tutorial">Tutorial</div>
          , 
        
          <div class="cat" href="blog/categories/#WordPress">WordPress</div>
          
        
        <div class='datetime'>27 Jun 2020</div>
      </div>
      <h1 class='title'>WP Custom Post Types but Free</h1>
      
        <div class='auth'>By Benji</div>
      
    </div>
    <section class='content'>
      <p>Sometimes you’re good at more than one type of thing. That’s OK, you’re human. We like to categorize things and study them logically to distinguish them from each other. We argue about definitions. We like tables. We like lists. We make Custom Types for everything.</p>

<p>What’s <em>not</em> so OK is if you’re developing on a “simple” blog templating tool and you think you can’t. Those things only do blogs, right? The type of data you’re storing is a blog. The metadata on those posts is standard. You can’t well use that for recipes AND blogs. Just make a <code class="highlighter-rouge">recipes</code> tag and call it a day.</p>

<p>Luckily that’s not true at all… you can automate almost anything you want with a little ingenuity, and automation is the key to efficient web work. In most cases I’m learning Jekyll was actually built for this sort of automation, but the documentation isn’t always very helpful to show you <a href="https://jekyllrb.com/docs/liquid/">how to use it</a>.</p>

<h2 id="meta-meta">Meta-meta</h2>
<p>In part one <a href="/jekyll-custom-fields/">we talked about Liquid</a>, and how to use it to make ACF-like custom fields on your static marketing site. That’s all well and good if you’ve got individual pages that you want to clone. But what about whole categories of content?</p>

<h2 id="meta-meta-meta">Meta-meta-meta</h2>
<p>WordPress calls that stuff Custom Post Types. It’s based on the idea that you want <code class="highlighter-rouge">posts</code> for writing things, but you also want a <code class="highlighter-rouge">projects</code> section that shows off your wow mad skillz. You’d probably like to query those <code class="highlighter-rouge">projects</code> independently of the <code class="highlighter-rouge">posts</code>. And maybe you’d like some <code class="highlighter-rouge">events</code>, <code class="highlighter-rouge">programs</code>, <code class="highlighter-rouge">cats</code>, and <code class="highlighter-rouge">hairpieces</code>. Your business is not the strangest thing on the internet, I promise.</p>

<p>All of those types are still going to generate data in the same way a blog would. You’ll have an index, an author, a post-date, a title, and some contents. You’ll have a single template for the files, with whatever custom metadata you like, and you can query a list of all of the fields in some format to make it easy for people to search and peruse.</p>

<h2 id="custom-post-types-are-called-collections">Custom Post Types are called Collections</h2>
<p>As we know, Jekyll is a blog generator! Jekyll does the bloggy parts of this just fine. It also has built-in functionality for Custom Post Types that work in tandem with the blog. The creators of Jekyll, having no ties to WordPress that I know of, decided <em>not</em> to name their custom post types Custom Post Types. They call them Collections.</p>

<p>In 5 years of building Jekyll sites, I never came across a Collection. I didn’t know what it was. (Before I had a full-time development job, I didn’t even know why I would need something like it.) But it is pretty darn swanky! It can do everything that a WordPress CPT can do, and pre-render the pages as they are built.</p>

<blockquote>
  <p>Pre-rendered for your viewing pleasure</p>
</blockquote>

<p>I will say that again, louder. It can do all of the work to render a list of these blogs <em>one time</em> and <em>store the results</em> to be served instantly. If the build time takes an extra ten minutes, it’s not a bother for your end users. If you come from a WordPress background (or most full-stack projects), this might take some getting used to.</p>

<h2 id="old-way-of-thinking">Old Way of thinking:</h2>

<p>This is a common thought process for a WordPress developer:</p>
<ul>
  <li>I need only the posts within a certain Post Type, with a certain field.</li>
  <li>I need to loop through them and grab a connecting ID for other post types.</li>
  <li>Then I need to loop through <em>those IDs</em> and display their special metadata.</li>
</ul>

<h3 id="really-bad-but-easy-to-follow-example">Really bad but easy to follow example</h3>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$artist_query</span> <span class="o">=</span> <span class="nx">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'numberposts'</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>      <span class="c1">// all of 'em</span>
  <span class="s1">'post_type'</span>   <span class="o">=&gt;</span> <span class="s1">'artist'</span>
<span class="p">));</span>

<span class="c1">// iterate through all the Artists after a single query</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$artist_query</span> <span class="k">as</span> <span class="nv">$artist</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$artist</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">];</span>

  <span class="c1">// making queries inside of loops is baaaaaad news</span>
  <span class="nv">$art_query</span> <span class="o">=</span> <span class="nx">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'numberposts'</span>  <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="s1">'post_type'</span>    <span class="o">=&gt;</span> <span class="s1">'art'</span><span class="p">,</span>
    <span class="s1">'meta_key'</span>     <span class="o">=&gt;</span> <span class="s1">'artist'</span><span class="p">,</span>
    <span class="s1">'meta_value'</span>   <span class="o">=&gt;</span> <span class="nv">$id</span>
  <span class="p">));</span>
<span class="p">}</span></code></pre></figure>

<p>Looping through multiple large queries is going to slow down your page. Maybe you should just index those files yourself in some post meta and make things easier to find. Make a cron and keep things synchronized. If you’re getting fancy here, you might jump into the database itself with a <code class="highlighter-rouge">JOIN</code>. It’s going to depend a lot on the size of your indexing lines, to be sure.</p>

<h3 id="real-world-indexing-example">Real world indexing example</h3>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="c1">// start by iterating through all the Artists to set up the index</span>
<span class="nv">$artists</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$all_artists</span> <span class="k">as</span> <span class="nv">$artist</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$artist</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">];</span>
  <span class="nv">$artists</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'ID'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$id</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// then do the same with each piece of Art</span>
<span class="nv">$art</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$all_art</span> <span class="k">as</span> <span class="nv">$work</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$work</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">];</span>
  <span class="nv">$art</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'ID'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$id</span><span class="p">;</span>
  <span class="nv">$art</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'artist_id'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_field</span><span class="p">(</span><span class="s1">'artist'</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span> <span class="c1">// yeah, this was an ACF too</span>

  <span class="c1">// add only what you need from the Art CPT in the Artist array</span>
  <span class="nv">$a_id</span> <span class="o">=</span> <span class="nv">$art</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'artist_id'</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$artists</span><span class="p">[</span><span class="nv">$a_id</span><span class="p">][</span><span class="s1">'art'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$artists</span><span class="p">[</span><span class="nv">$a_id</span><span class="p">][</span><span class="s1">'art'</span><span class="p">][</span><span class="nv">$id</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="nv">$id</span><span class="p">,</span>
      <span class="nv">$work</span><span class="p">[</span><span class="s1">'post_title'</span><span class="p">]</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="i-digress">I digress</h2>
<p>Once again, <em>you really don’t have to worry about all that optimization with a static site!</em> It indexes and builds itself. Users will see all that automation like you did it by hand. These days static sites are even smart enough to know when you’re changing files, and do <a href="https://jekyllrb.com/docs/configuration/incremental-regeneration/">incremental builds</a> which are smart enough to keep those complicated queries from slowing down your whole site build every time. You won’t waste time either.</p>

      <hr>

      <div class='bio'>
        <h2>About the Author:</h2>
        <p><a href='/contact/'>Benji</a> is a professional web dude. He works at <a href='https://builtbytophat.com' target='_blank' rel='noopener noreferrer'>Top Hat</a> making cool web things for money (and sometimes beer).</p>
      </div>
      <div class='disclaimer'>
        <strong>Disclaimer!</strong>
        Photos on this blog are sometimes taken by me, but sometimes free for use with attribution from <a href='https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText' target='_blank' rel='noopener noreferrer'>Unsplash.com</a>.
      </div>
    </section>
  </article>
  <div class='outer-hero'>
    <div class='hero' style="background-image: url(/assets/images/custom-food-types.svg)"></div>
  </div>
</div>
      </div>
    </section>
    <div class="footer-white-bg">
  <div class="main-footer">
    <div class="cont">
      <div class="b footer-child">
        <h3>BENJI</h3>
        <p><a href="/blog/">        blog</a></p>
        <p><a href="/resume/">        resume</a></p>
        <p><a href="/portfolio/#news"> news</a></p>
      </div>
      <div class="c footer-child">
        <h3>CODE</h3>
        <p><a href="/portfolio/#code">                     portfolio</a></p>
        <p><a href="http://github.com/benjithaimmortal">  github</a></p>
        <p><a href="http://codepen.io/benjithaimmortal">  codepen</a></p>
      </div>
      <div class="p footer-child">
        <h3>PHOTOGRAPHY</h3>
        <!-- <p><a href="{/% link photos.html %}"> portfolio</a></p> -->
        <p><a href="/contact/">contact</a></p>
      </div>
      <div class="l footer-child">
        <h3>LICENSE</h3>
        <p>all rights reserved</p>
        <p>copyright &copy;	2020</p>
        <p>Benjamin Kostenbader</p>
      </div>
    </div>
  </div>
</div>
<footer class="footer">
  made with love by Benji &hearts;
</footer>
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      var stopper = document.getElementById("pagestopper")
      stopper.addEventListener("change", function(){
        if (stopper.checked) {
          document.body.classList.add("locked");
        } else {
          document.body.classList.remove("locked");
        }
        // console.log("this did something");
      });
    });
  </script>
</html>
