<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en_US"><generator uri="https://jekyllrb.com/" version="4.0.1">Jekyll</generator><link href="https://www.monjibram.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://www.monjibram.com/" rel="alternate" type="text/html" hreflang="en_US" /><updated>2023-08-22T08:52:29-04:00</updated><id>https://www.monjibram.com/feed.xml</id><title type="html">Benji Kostenbader</title><subtitle>Benjamin Kostenbader is the founder and lead developer at Monjibram. He works primarily with Jamstack and WordPress frameworks. He lives in Pittsburgh, Pennsylvania.</subtitle><author><name>Benjamin Kostenbader</name></author><entry><title type="html">Await a Second</title><link href="https://www.monjibram.com/await-a-second/" rel="alternate" type="text/html" title="Await a Second" /><published>2021-01-03T00:00:00-05:00</published><updated>2021-01-03T00:00:00-05:00</updated><id>https://www.monjibram.com/await-a-second</id><content type="html" xml:base="https://www.monjibram.com/await-a-second/"><![CDATA[<p>It took me years and years to understand how browsers process time. It’s actually pretty easy. Let me help you out a little bit. I apologize beforehand for the dad puns along the way.</p>

<h2 id="time-after-time-things-change">Time after time, things change</h2>
<p>Making things happen in a set amount of time might be one of the most important parts of web development, and as such it’s changed. What was true 10 years ago is no longer true. Stack Overflow is going to give you <em>many answers</em>. Idiomatic JS is going to give you <em>many answers</em>. There are many ways to skin this cat. I’m not going to tell you the best way. You might not even like my way. But my goal is, by the end, at least you’ll understand <em>what is happening</em> with my way. That’s the plan here.</p>

<h2 id="this-is-cheating-and-you-should-too">This is cheating (and you should too)</h2>
<p>JavaScript uses this handy dandy thing called <code class="highlighter-rouge">setTimeout()</code> which <code class="highlighter-rouge">sets</code> a <code class="highlighter-rouge">timeout</code> period. It’s not going to be pretty, but it will pause for a little while, then run the code inside. It’s super easy and cool, and you’ve probably used it before. If not, it looks like this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="c1">// example one: anonymous function</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">finished anonymously</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// things you'll do after the timeout</span>
  <span class="p">},</span> <span class="mi">12345</span><span class="p">);</span> <span class="c1">// milliseconds before the function is run</span>

  <span class="c1">// example two: separating concerns, naming your function</span>
  <span class="kd">function</span> <span class="nx">finished</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">finished from finished()</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">finished</span><span class="p">,</span> <span class="mi">1234</span><span class="p">);</span>

  <span class="c1">// but this code? It ran first.</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">too late, I ran</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<p>But the very same thing that makes timers great is their weakness: they don’t stop your code. Here’s the order of logs from the code above:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="dl">"</span><span class="s2">too late, I ran</span><span class="dl">"</span>           <span class="c1">// instantly</span>
<span class="dl">"</span><span class="s2">finished from finished()</span><span class="dl">"</span>  <span class="c1">// after 1.234 seconds</span>
<span class="dl">"</span><span class="s2">finished anonymously</span><span class="dl">"</span>      <span class="c1">// after 12.345 seconds</span></code></pre></figure>

<blockquote>
  <p><strong>Breakdown:</strong> Code outside of the blocks runs now, and code inside the blocks doesn’t affect other blocks.</p>
</blockquote>

<h2 id="wheels-within-wheels">Wheels within wheels</h2>
<p>The only way you’re going to successfully chain these bad boys is by making a neat little stack of them. But that makes for a pretty nasty last-ditch end result:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="c1">// timing of the down transition</span>
  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">transitionOut</span><span class="p">();</span>
    <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">resetTransition</span><span class="p">();</span>
      <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// do the dance again</span>
        <span class="nx">transitionIn</span><span class="p">();</span>
        <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">resetTransition</span><span class="p">();</span>
        <span class="p">},</span> <span class="mi">150</span><span class="p">);</span>
      <span class="p">},</span> <span class="mi">780</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">150</span><span class="p">);</span>
  <span class="p">},</span> <span class="mi">780</span><span class="p">);</span></code></pre></figure>

<h2 id="remove-settimeout-with-cleartimeout">Remove setTimeout with clearTimeout</h2>
<p>I could and may make a whole article about this, but <code class="highlighter-rouge">clearTimeout()</code> will <em>stop</em> a timeout from firing like this:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">timmy</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">finished</span><span class="p">,</span> <span class="mi">1234</span><span class="p">);</span> <span class="c1">// never gonna happen</span>
<span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timmy</span><span class="p">);</span>                    <span class="c1">// because we cleared it immediately</span></code></pre></figure>

<p>Clearing a timeout is dead simple, except that <em>you must have access to that variable</em> <code class="highlighter-rouge">timmy</code> <em>at all times</em>. Take care to define <code class="highlighter-rouge">timmy</code> outside of the function you’re setting it, or it’ll be nigh unto useless.</p>

<h2 id="promises-are-weird">Promises are weird</h2>
<p>But what if I really want things to wait? I can always make a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>. Promises are best explained by defining them.</p>

<p>Let’s say you run a muppet shop, and I want a muppet. So I come up to the register, show you the muppet I want, and swipe my credit card. Are we done? Can I walk out and leave?</p>

<p>Noooope. You want to confirm that my card is valid. We stand there awkwardly for a few seconds. We make small-talk about how badly I want to leave your store and how badly you want me to leave too. My credit card data gets processed, authenticated, and approved.</p>

<p><em>Ding!</em> Now I can leave. You try to hand me a receipt. I let it fall to the ground because I am not a hostage to your culture’s demands, nor do I want to sanitize my hands again. I let thoughts of maskless, unencumbered breathing carry me through the automatic doors, and into the great dystopian unknown.</p>

<p><strong>That credit card transaction was a Promise!</strong> It stopped everything, waited for a fulfillment, and had two outcomes:</p>
<ul>
  <li>Accepted: take your item and get outta here</li>
  <li>Errored: try again or we’re stuck</li>
</ul>

<h2 id="promises-are-built-into-ajax-and-thats-what-well-use-them-for">Promises are built into Ajax, and that’s what we’ll use them for</h2>
<p>In fact, that promise example is probably based on a literal Promise. If the credit card machine runs on Node, 99% of the time it’s literally running an <code class="highlighter-rouge">XMLHttpRequest()</code> Promise:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// directly from jQuery docs</span>
<span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://www.example.com/endpoint</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span> <span class="nx">yourCreditCardData</span>
<span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span> <span class="dl">"</span><span class="s2">woo, success!</span><span class="dl">"</span> <span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span> <span class="p">);</span>
  <span class="p">})</span></code></pre></figure>

<p>Promises use the following <em>very easy</em> result syntax:</p>
<ul>
  <li><code class="highlighter-rouge">.then(yourFunctionHere)</code> is a chain for what comes next</li>
  <li><code class="highlighter-rouge">.done(yourFunctionHere)</code> is a similar chain for successful results</li>
  <li><code class="highlighter-rouge">.success(yourFunctionHere)</code> is yet another one of those</li>
  <li><code class="highlighter-rouge">.fail(yourFunctionHere)</code> is a chain for what to do if the Promise … fails</li>
  <li><code class="highlighter-rouge">.always(yourFunctionHere)</code> happens on <em>either</em> success <em>or</em> error</li>
</ul>

<h2 id="and-thats-the-end-of-promises-i-promise">And that’s the end of Promises, I promise</h2>
<p>Promises are GREAT for Ajax, and, honestly, that’s about all they’re great for. If the library you’re using doesn’t specifically say a function</p>

<blockquote>
  <p>returns a promise</p>
</blockquote>

<p>then I just ignore the potential headache that promises would bring. Promises are a confusing API that is difficult for experts, and difficult code is the enemy of readable code. So there’s only one more case in which I’d use one.</p>

<h2 id="thanks-for-awaiting">Thanks for awaiting</h2>
<p>You’ve been patient, and a treasure <code class="highlighter-rouge">await</code>s you. It’s wrapped in an <code class="highlighter-rouge">async</code> function (short for <em>asynchronous</em>). In fact, if you forget the <code class="highlighter-rouge">async</code> part, JS will throw a special error just for you.</p>

<blockquote>
  <p>Uncaught SyntaxError: await is only valid in async functions and async generators</p>
</blockquote>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function">Async functions</a> stop the whole show until any <code class="highlighter-rouge">await</code> calls inside are finished. That means that calling one of these will effectively pause your code for the predetermined time.</p>

<p>Let’s say you’ve got a transition that takes 0.2 seconds. Once that transition is finished, you really need to do something right away. This was a problem I encountered while implementing the blink logic on this site.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// a shortcut for $(document).ready(async function(){...</span>
<span class="nx">$</span><span class="p">(</span><span class="k">async</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// blink in</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">fadein</span><span class="dl">'</span><span class="p">);</span>
  <span class="c1">// a one-liner pause for 200 ms</span>
  <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">anything</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">anything</span><span class="p">,</span> <span class="mi">200</span><span class="p">));</span>
  <span class="c1">// after-transition logic</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">html</span><span class="dl">'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">no-back</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>Rewriting that pyramid jumble of callbacks above, we get something much more eloquent and readable.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">async</span> <span class="kd">function</span> <span class="nx">fullTransitionEffect</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">transitionOut</span><span class="p">();</span>   <span class="c1">// takes 780ms</span>
  <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="mi">780</span><span class="p">));</span> 

  <span class="nx">resetTransition</span><span class="p">();</span> <span class="c1">// takes 150ms</span>
  <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="mi">150</span><span class="p">));</span> 
  
  <span class="nx">transitionIn</span><span class="p">();</span>    <span class="c1">// takes 780ms</span>
  <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="mi">780</span><span class="p">));</span> 

  <span class="nx">resetTransition</span><span class="p">();</span> <span class="c1">// takes 150ms</span>
  <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="mi">150</span><span class="p">));</span>
<span class="p">}</span></code></pre></figure>

<h2 id="out-of-time">Out of time</h2>
<p>Time is fleeting. There are so many ways to perceive it and manipulate it on a website:</p>

<p>We could get into <code class="highlighter-rouge">Moment.JS</code>, a devilish and entirely necessary library for standardized date/timestamp formatting (or we could just use the <a href="https://en.wikipedia.org/wiki/ISO_8601">standard datetime stamp that the world decided on before I was born</a>). There’s plenty of room for time zone doom and gloom as well.</p>

<p>Calendars are fun, too. Simple algorithms for events that fall on certain days a month may be one of the hardest things I’ve encountered.</p>

<p>Or we could take another tack and look at <code class="highlighter-rouge">setTimeout</code>’s twins <code class="highlighter-rouge">setInterval()</code> and <code class="highlighter-rouge">removeInterval()</code>. Those were a big part of the <a href="https://oldgermanbeer.com">Old German Beer game</a>.</p>

<p>Whatever we do must <code class="highlighter-rouge">await</code> more time from my busy schedule.</p>]]></content><author><name>Benji Kostenbader</name></author><category term="Tutorials" /><category term="Featured" /><summary type="html"><![CDATA[It took me years and years to understand how browsers process time. It’s actually pretty easy. Let me help you out a little bit. I apologize beforehand for the dad puns along the way.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/await.jpg" /><media:content medium="image" url="https://www.monjibram.com/assets/images/await.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">How I Paginated This Blog</title><link href="https://www.monjibram.com/static-sites-and-filtering-things/" rel="alternate" type="text/html" title="How I Paginated This Blog" /><published>2020-11-28T00:00:00-05:00</published><updated>2020-11-28T00:00:00-05:00</updated><id>https://www.monjibram.com/static-sites-and-filtering-things</id><content type="html" xml:base="https://www.monjibram.com/static-sites-and-filtering-things/"><![CDATA[<p>You should use Ajax. It’s bad practice these days to paginate a blog with buttons. I don’t want to press buttons. I have high-speed internet everywhere. I want the internet to work for me, and so do your readers.</p>

<p>Coincidentally, you should also stop paying fees for a server to do these things for you. I pay nothing for this site but URL domain fees. I know, you’re jealous. I maintain that it isn’t that hard, and that <a href="/jam-that-sucker/">it’s the best</a>, and that developers should do this stuff for big ol’ companies. And I do it for big ol’ companies from time to time, just to prove it! (Well, maybe also for money…)</p>

<p>I’m also one of those guys who spends a lot of time <a href="/organizing-your-stuff-should-be-easy/">visualizing and manipulating data with WordPress</a>. It isn’t surprising that I expected that functionality when I was building out my own blog. Blogs are pretty standard things to sort and filter, after all.</p>

<h2 id="how-am-i-sorting-anyway">How am I sorting, anyway?</h2>

<p>Sorting a thing isn’t bad. It’s JavaScript territory. I’m attaching the blog’s taxonomy (in this case, <code class="highlighter-rouge">tags</code>) to the post-card anyway. You can see them here. So by the time the HTML is outputting, I can grab the relevant info to filter <code class="highlighter-rouge">posts</code> by <code class="highlighter-rouge">tag</code> no problem. By the way, <strong>I used jQuery here</strong>. Not because you need to! But jQuery has <code class="highlighter-rouge">.ajax()</code> and it’s a lot easier than <code class="highlighter-rouge">XMLHttpRequest()</code>. Grab it in CDN form <a href="https://code.jquery.com/">here</a>, and slap the generated HTML tag above your JS output.</p>

<p><img src="/assets/images/blog/post-card.png" alt="Cards for each post, on the blog index page" title="Post cards! Ha." /></p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="c">&lt;!-- Example filter HTML --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"filter"</span> <span class="na">data-filter=</span><span class="s">"static-nbsp-sites"</span><span class="nt">&gt;</span>Static<span class="ni">&amp;nbsp;</span>Sites<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- Example Post Card HTML --&gt;</span>
<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/static-sites-and-filtering-things/"</span> <span class="na">class=</span><span class="s">"post-card"</span> <span class="na">data-filter=</span><span class="s">"static-nbsp-sitestutorials"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"left"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"tag-date"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"tags"</span><span class="nt">&gt;</span>Static<span class="ni">&amp;nbsp;</span>Sites, Tutorials<span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"date"</span><span class="nt">&gt;</span>11/28/20<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"title"</span><span class="nt">&gt;</span>How I Paginated This Blog<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"shortcut"</span><span class="nt">&gt;</span>I pay nothing for this site but URL domain fees. I know, you’re jealous. I maintain that it isn’t that...<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"right"</span> <span class="na">style=</span><span class="s">"background-image: url(/assets/images/pages.jpg);"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/a&gt;</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.filter</span><span class="dl">'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="c1">// this is the 'return to unfiltered' state</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">hasClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// could easily make an unfilterCards() function for this, but it's so small in my case</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.post-card</span><span class="dl">'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active</span><span class="dl">'</span><span class="p">);</span>

  <span class="c1">// and this is where the filtering happens</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">filter</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="dl">'</span><span class="s1">filter</span><span class="dl">'</span><span class="p">);</span>

    <span class="c1">// this is where the transitions happen. the important thing is it uses .hide() and .show() on post cards</span>
    <span class="nx">filterCards</span><span class="p">(</span><span class="nx">filter</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>

    <span class="c1">// oh! this looks interesting... read on.</span>
    <span class="k">while</span> <span class="p">((</span><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.post-card[data-filter*="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">filter</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"]</span><span class="dl">'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">totalPages</span> <span class="o">!=</span> <span class="nx">nextPage</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">loadMorePosts</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})</span></code></pre></figure>

<h2 id="but-what-if-the-blogs-arent-on-the-page">But what if the blogs aren’t on the page?</h2>

<p>The way Jekyll deals with posts is pretty standard. There’s a plugin called <code class="highlighter-rouge">paginator</code>. It intakes how many blogs were output, and does the hard work of keeping track of it for you. You can <a href="https://jekyllrb.com/docs/pagination/">change the paginator settings</a> in the config file. I can do similar things in Hugo or Eleventy. It looks a bit different in a front-end framework, but this is good enough for concepts.</p>

<figure class="highlight"><pre><code class="language-rb" data-lang="rb"><span class="c1"># encapsulate all of these commands in { % % } for use in Jekyll templates</span>
<span class="k">for</span> <span class="n">post</span> <span class="k">in</span> <span class="n">paginator</span><span class="p">.</span><span class="nf">posts</span>
  <span class="c1"># post-cards is the html that outputs the stuff above</span>
  <span class="kp">include</span> <span class="n">post</span><span class="o">-</span><span class="n">cards</span><span class="p">.</span><span class="nf">html</span>
<span class="n">endfor</span></code></pre></figure>

<p>So <code class="highlighter-rouge">paginator</code> is doing a few cool things for us. It’s outputting exactly the HTML we need for that page, so we don’t need to load every <code class="highlighter-rouge">post</code> in the site. It’s keeping track of how many <code class="highlighter-rouge">posts</code> it output. It’s even making extra pages at <code class="highlighter-rouge">/blog/2</code> and <code class="highlighter-rouge">/blog/3</code> and so on. That last one’s especially important for my purposes.</p>

<blockquote>
  <p>You can see <code class="highlighter-rouge">paginator</code> in action <a href="/blog/3">here</a>, but the Ajax will make it act funny.</p>
</blockquote>

<h2 id="paginator-did-its-job-too-well">Paginator did its job too well</h2>

<p>I asked paginator to leave six posts on the page and that’s exactly what it did. When I <code class="highlighter-rouge">.hide()</code> a few of them, it’s going to look pretty terrible. People will expect 6 <code class="highlighter-rouge">posts</code> to show up, unless there are no more posts in that category.</p>

<p>So what about this one we’re filtering, <code class="highlighter-rouge">Static&amp;nbsp;Sites</code>?  The only other post with that <code class="highlighter-rouge">tag</code> is one of the <a href="/paginate-with-jekyll/">first I ever wrote</a>! It’s definitely not going to be in the HTML for page one, the most recent 6 <code class="highlighter-rouge">posts</code> of the whole blog. I need to go get it. Thus, <code class="highlighter-rouge">loadMorePosts();</code></p>

<h2 id="go-get-more-stuff">Go get more stuff</h2>

<p>Ajax is how we go get more stuff on a living, breathing page:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">nextPage</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">totalPages</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Number</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.post-flex</span><span class="dl">"</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="dl">"</span><span class="s2">totalPages</span><span class="dl">"</span><span class="p">));</span>

<span class="kd">function</span> <span class="nx">loadMorePosts</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// I make a pretty little loading function. though it's so fast you never see it :)</span>
  <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.skeleton</span><span class="dl">"</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="dl">"</span><span class="s2">active</span><span class="dl">"</span><span class="p">);</span>
  
  <span class="c1">// that thing I keep telling you about</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
    <span class="c1">// example, https://www.monjibram.com/blog/2</span>
    <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/blog/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">nextPage</span><span class="p">,</span>
  <span class="p">})</span>
    <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
      <span class="c1">// the response's body is simple HTML, so we can jQuery it</span>
      <span class="nx">$</span><span class="p">(</span><span class="nx">response</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.post-card</span><span class="dl">'</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// put the posts at the end, and remove the skeleton loading function</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.post-flex</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.skeleton</span><span class="dl">'</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>

        <span class="c1">// hide cards we don't need</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.filter.active</span><span class="dl">'</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">filterCards</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.filter.active</span><span class="dl">'</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="dl">'</span><span class="s1">filter</span><span class="dl">'</span><span class="p">),</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.filter.active</span><span class="dl">'</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">});</span>

      <span class="c1">// iterate nextPage for the next time we need it</span>
      <span class="nx">nextPage</span> <span class="o">=</span> <span class="nx">nextPage</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span></code></pre></figure>

<h2 id="now-check-again-again-again">Now check again… again… again…</h2>

<p>Now we can explain this line at the end of our initial filter function.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">while</span> <span class="p">((</span><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.post-card[data-filter*="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">filter</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"]</span><span class="dl">'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">totalPages</span> <span class="o">!=</span> <span class="nx">nextPage</span><span class="p">))</span> <span class="p">{</span>
  <span class="nx">loadMorePosts</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<p><strong>Unpacked…</strong></p>
<ul>
  <li>As long as we haven’t hit 6 posts, the visible minimum, keep loading more</li>
  <li>Load 6 posts at a time, and keep checking them</li>
  <li>If we hit the last page, we did it all! You can stop now.</li>
</ul>

<p>That last line used Jekyll’s <code class="highlighter-rouge">paginator.total_pages</code>. That’s pretty key.</p>

<h2 id="conclusions">Conclusions</h2>

<p>So I did a thing you’re used to doing with backend code on a SSG. This wasn’t and isn’t a hard thing to do. You should do it on your blog!</p>

<p>Clearly there are some other things to take into account before it goes critical and starts to feel like a natural page. Even writing this blog, I found issues with how the posts were displaying in <code class="highlighter-rouge">flex</code> with <code class="highlighter-rouge">justify-content: space between</code>. Did you find them too? I could definitely solve a layout thing like that in a future blog, but until then I’ll leave it! Sleuth away 🕵️‍♂️</p>]]></content><author><name>Benji Kostenbader</name></author><category term="Tutorials" /><category term="Static&amp;nbsp;Sites" /><category term="Featured" /><summary type="html"><![CDATA[You should use Ajax. It’s bad practice these days to paginate a blog with buttons. I don’t want to press buttons. I have high-speed internet everywhere. I want the internet to work for me, and so do your readers.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/pages.webp" /><media:content medium="image" url="https://www.monjibram.com/assets/images/pages.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Organizing Your Stuff Is[n’t] Easy</title><link href="https://www.monjibram.com/organizing-your-stuff-should-be-easy/" rel="alternate" type="text/html" title="Organizing Your Stuff Is[n’t] Easy" /><published>2020-11-13T00:00:00-05:00</published><updated>2020-11-13T00:00:00-05:00</updated><id>https://www.monjibram.com/organizing-your-stuff-should-be-easy</id><content type="html" xml:base="https://www.monjibram.com/organizing-your-stuff-should-be-easy/"><![CDATA[<p>But stuff rarely is, is it? This week we did a thing on a website. It required us to create or update something, depending on whether or not that thing exists. Simple enough, if you’re copy and pasting, but still time consuming when you’re writing DRY code.</p>

<blockquote>
  <p>By the way, DRY means <strong>D</strong>on’t <strong>R</strong>epeat <strong>Y</strong>ourself.</p>
</blockquote>

<p><strong>DRY</strong> code is one of those useful code quotes that was probably coined by Uncle Bob or Ada Lovelace or Abraham Lincoln (it’s actually attributed to Andy Hunt and Dave Thomas, if you care), which is incredibly overworked by the fancy developers you’ll see waxing eloquent on <a href="https://www.youtube.com/watch?v=G6qOvbLngVs">complex new frameworks</a>, or talking quickly and passionately about <a href="https://youtu.be/qGdYVslWJdQ?t=906">things that don’t matter</a>.</p>

<p>But it’s time consuming. If you are a precognitive savant, you can use your innate talents to divine the whole structure of what you’re doing the first time. For the rest of us, we review our code many times as things progress, and keep refining it.</p>

<p>So I’m thinking about this code that I wrote once, which is a perfectly useful example. I’m trying to process some existing Custom Post Types and import them into existing, more specific ones.</p>

<p>I’m not thinking about speed, here. Even if there are hundreds and hundreds of these things, it’s not going to overwhelm my server’s processor. It’s not a web view, so I’m not making users wait around. It’s just a one-time transaction.</p>

<p>Prepare to <a href="#after-the-first-pass">skip to the end</a> if you don’t want to scroll through the muck and comments!</p>

<h2 id="the-first-pass">The First Pass</h2>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="c1">// I want to add some new Custom Post Types called Kittens, but I want to use the existing data from Cats.</span>
<span class="nv">$kittens</span> <span class="o">=</span> <span class="nf">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'numberposts'</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="c1">// this defaults to ten, but I want all of them</span>
  <span class="s1">'post_type'</span>   <span class="o">=&gt;</span> <span class="s1">'cat'</span><span class="p">,</span>
  <span class="s1">'post_status'</span> <span class="o">=&gt;</span> <span class="s1">'publish'</span><span class="p">,</span>
  <span class="s1">'meta_key'</span>    <span class="o">=&gt;</span> <span class="s1">'baby'</span><span class="p">,</span>
  <span class="s1">'meta_value'</span>  <span class="o">=&gt;</span> <span class="s1">'true'</span><span class="p">,</span>
<span class="p">));</span>

<span class="c1">// Now things get complex. the end of this foreach is a long way away.</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$kittens</span> <span class="k">as</span> <span class="nv">$i</span> <span class="o">=&gt;</span> <span class="nv">$kitten</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$original_id</span> <span class="o">=</span> <span class="nv">$kitten</span><span class="o">-&gt;</span><span class="no">ID</span><span class="p">;</span>
  <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$kitten</span><span class="o">-&gt;</span><span class="n">post_title</span><span class="p">;</span>
  <span class="nv">$breed</span> <span class="o">=</span> <span class="nf">get_field</span><span class="p">(</span><span class="s1">'breed'</span><span class="p">,</span> <span class="nv">$original_id</span><span class="p">);</span> <span class="c1">// an ACF</span>
  <span class="nv">$other_cat_meta</span> <span class="o">=</span> <span class="nf">get_post_meta</span><span class="p">(</span><span class="s1">'cat_meta'</span><span class="p">,</span> <span class="nv">$original_id</span><span class="p">);</span> <span class="c1">// some post meta</span>
  <span class="c1">// more metadata</span>
  
  <span class="c1">// But wait, is there already a Cat like this in my Kittens?</span>
  <span class="c1">// I don't want duplicates, in case I have to modify the data and run this migration again later.</span>
  <span class="nv">$existing_kitten</span> <span class="o">=</span> <span class="nf">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'post_status'</span> <span class="o">=&gt;</span> <span class="s1">'publish'</span><span class="p">,</span>
    <span class="s1">'post_type'</span> <span class="o">=&gt;</span> <span class="s1">'kitten'</span><span class="p">,</span>
    <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>   <span class="c1">// Let's say that most titles are unique...</span>
    <span class="s1">'meta_key'</span> <span class="o">=&gt;</span> <span class="s1">'breed'</span>
    <span class="s1">'meta_value'</span> <span class="o">=&gt;</span> <span class="nv">$breed</span><span class="p">,</span> <span class="c1">// ...and that this solidifies that uniqueness</span>
  <span class="p">))[</span><span class="mi">0</span><span class="p">];</span> <span class="c1">// Grab the first post like this. I trust that your data selection is unique **side eye**</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nv">$existing_kitten</span><span class="o">-&gt;</span><span class="no">ID</span><span class="p">)</span> <span class="p">{</span>
  	<span class="nv">$confirmation</span> <span class="o">=</span> <span class="nf">wp_update_post</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
      <span class="s1">'ID'</span> <span class="o">=&gt;</span> <span class="nv">$existing_kitten</span><span class="o">-&gt;</span><span class="no">ID</span><span class="p">,</span>
      <span class="s1">'post_title'</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
      <span class="s1">'post_status'</span> <span class="o">=&gt;</span> <span class="s1">'publish'</span><span class="p">,</span>
      <span class="s1">'meta_input'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'breed'</span> <span class="o">=&gt;</span> <span class="nv">$breed</span><span class="p">,</span>
        <span class="s1">'cat_meta'</span> <span class="o">=&gt;</span> <span class="nv">$other_cat_meta</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="c1">// more things</span>
    <span class="p">));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// No existing kittens, proceed with making a new one</span>
    <span class="nv">$confirmation</span> <span class="o">=</span> <span class="nf">wp_insert_post</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
      <span class="s1">'post_title'</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
      <span class="s1">'post_status'</span> <span class="o">=&gt;</span> <span class="s1">'publish'</span><span class="p">,</span>
      <span class="s1">'meta_input'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'breed'</span> <span class="o">=&gt;</span> <span class="nv">$breed</span><span class="p">,</span>
        <span class="s1">'cat_meta'</span> <span class="o">=&gt;</span> <span class="nv">$other_cat_meta</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="c1">// more things</span>
    <span class="p">));</span>
  <span class="p">}</span>
  
  <span class="c1">// You can put confirmations in post meta somewhere like this...</span>
  <span class="nv">$log_post_id</span> <span class="o">=</span> <span class="mi">12345</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$confirmation</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="nf">update_post_meta</span><span class="p">(</span><span class="nv">$log_post_id</span><span class="p">,</span> <span class="s1">'log'</span><span class="p">,</span> <span class="s1">'error on $original_id'</span><span class="p">);</span> <span class="p">}</span>
  <span class="c1">// or raise an exception within the functions by setting the second arg to true, if you're logging those</span>
  <span class="nf">wp_insert_posts</span><span class="p">(</span><span class="nv">$post_array</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="nf">wp_update_posts</span><span class="p">(</span><span class="nv">$post_array</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  
  <span class="c1">// Welcome to the end! You made it.</span>
<span class="p">}</span></code></pre></figure>

<h2 id="after-the-first-pass">After the First Pass</h2>
<p>That was fine, and you should feel fine. But it was also super long. Way too long to store in one function. Kurt Vonnegut famously said, <a href="https://en.wikipedia.org/wiki/Separation_of_concerns" target="_blank">“separate your concerns”</a>.</p>

<p>That would work if we made a bunch of individual functions for updating or creating, for checking if <code class="highlighter-rouge">Kittens</code> exist. Sure. But that’s necessarily going to make this even bigger. I want to DRY it out first, or we’re going to be all.over.the.place.</p>

<h3 id="why-did-you-do-that">Why Did You Do That?</h3>
<p>I’m gonna visually separate this giant code block into things that we did:</p>

<ol>
  <li><strong>Query</strong> the <code class="highlighter-rouge">Cats</code> that are <code class="highlighter-rouge">Kittens</code></li>
  <li><em>Iterate</em> the <code class="highlighter-rouge">Kittens</code> to process:
    <ul>
      <li><strong>Query</strong> the data we need from each of the matching <code class="highlighter-rouge">Cats</code></li>
      <li><strong>Query</strong> existing <code class="highlighter-rouge">Kittens</code> to check for a match</li>
      <li><em>If</em> there’s a <code class="highlighter-rouge">Kitten</code>, <strong>Post</strong> an update</li>
      <li><em>Else,</em> <strong>Post</strong> a new post</li>
    </ul>
  </li>
</ol>

<p>There’s a pretty hard mental stop between database queries and local processing. I can’t gain any meaningful ground by trying to combine the <code class="highlighter-rouge">foreach</code> into a query, or even combining my <code class="highlighter-rouge">Cats</code> query with my <code class="highlighter-rouge">Kittens</code> query. They feel separate because they are!</p>

<p>But that last bit about posting changes felt pretty long. Even when I wrote the bullets I felt like it should be shorter. <code class="highlighter-rouge">If</code> conditions are notorious for making big, unnecessary code.</p>

<h3 id="what-did-you-want-to-do">What Did You Want to Do?</h3>
<p>We’ve got two fellow commands inside of that conditional, and they both do similar things: <a href="https://developer.wordpress.org/reference/functions/wp_update_post/" target="_blank"><code class="highlighter-rouge">wp_update_post()</code></a> and <a href="https://developer.wordpress.org/reference/functions/wp_insert_post/" target="_blank"><code class="highlighter-rouge">wp_insert_post()</code></a>. Wait, no, on a computer level they’re really doing the same thing: pushing identical data to the database. The only difference seems to be that one creates a unique ID and the other doesn’t.</p>

<p>So click on them and read around! You’ll find something interesting. If you already work with WordPress a lot, you probably already had an inkling about it.</p>

<blockquote>
  <p><code class="highlighter-rouge">wp_insert_post()</code> can also update posts!</p>
</blockquote>

<p>Oh cool. So if we have the right parameters we can make that add or update posts exactly like we want it to.</p>

<p><code class="highlighter-rouge">Side rant: How bloody confusing! Most of the time WP update_ functions are the ones that create-or-update. Welcome to PHP, a Wild West of naming conventions where array_push($home_array, $other_stuff) but implode($separators, $home_array). I even had to look it up again for this article to make sure I was right. But yeah, in this case you're going to use wp_insert_post().</code></p>

<p>So <code class="highlighter-rouge">wp_insert_post()</code> can take an existing ID and update that. Cool. But we don’t want to leave that field blank: that would be a great way to get errors, or overwrite an existing post elsewhere in the database. Or even worse, <strong>if the ID isn’t found… it breaks.</strong></p>

<p>Luckily, <a href="https://developer.wordpress.org/reference/functions/wp_insert_post/#comment-3682" target="_blank">I contributed something to the docs about that.</a></p>

<h3 id="compare">Compare</h3>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="c1">// insert</span>
<span class="nv">$confirmation</span> <span class="o">=</span> <span class="nf">wp_insert_post</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
  <span class="s1">'breed'</span> <span class="o">=&gt;</span> <span class="nv">$breed</span><span class="p">,</span>
  <span class="s1">'cat_meta'</span> <span class="o">=&gt;</span> <span class="nv">$other_cat_meta</span><span class="p">,</span>
  <span class="s1">'post_status'</span> <span class="o">=&gt;</span> <span class="s1">'publish'</span><span class="p">,</span>
  <span class="c1">// more things</span>
<span class="p">));</span>

<span class="c1">// update</span>
<span class="nv">$confirmation</span> <span class="o">=</span> <span class="nf">wp_update_post</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'ID'</span> <span class="o">=&gt;</span> <span class="nv">$existing_kitten</span><span class="o">-&gt;</span><span class="no">ID</span><span class="p">,</span>    <span class="c1">// NO, BOOOO</span>
  <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>               <span class="c1">// YES</span>
  <span class="s1">'post_status'</span> <span class="o">=&gt;</span> <span class="s1">'publish'</span><span class="p">,</span>      <span class="c1">// YES</span>
  <span class="s1">'meta_input'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>           <span class="c1">// YES</span>
    <span class="s1">'breed'</span> <span class="o">=&gt;</span> <span class="nv">$breed</span><span class="p">,</span>
    <span class="s1">'cat_meta'</span> <span class="o">=&gt;</span> <span class="nv">$other_cat_meta</span><span class="p">,</span>
  <span class="p">),</span>
  <span class="c1">// more things                   // YES</span>
<span class="p">));</span></code></pre></figure>

<p>We can copy everything else into both functions. Cleaning these args should just require us to insert the ID. So let’s do that separately!</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="nv">$title</span><span class="p">,</span>
  <span class="s1">'breed'</span> <span class="o">=&gt;</span> <span class="nv">$breed</span><span class="p">,</span>
  <span class="s1">'cat_meta'</span> <span class="o">=&gt;</span> <span class="nv">$other_cat_meta</span><span class="p">,</span>
  <span class="s1">'post_status'</span> <span class="o">=&gt;</span> <span class="s1">'publish'</span><span class="p">,</span>
  <span class="c1">// more things</span>
<span class="p">)</span>
<span class="c1">// If there be kitten, update kitten.</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$existing_kitten</span><span class="o">-&gt;</span><span class="no">ID</span><span class="p">)</span> <span class="p">{</span> <span class="nv">$args</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$existing_kitten</span><span class="o">-&gt;</span><span class="no">ID</span><span class="p">;</span> <span class="p">}</span>

<span class="nv">$confirmation</span> <span class="o">=</span> <span class="nf">wp_insert_post</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span></code></pre></figure>

<p>Woah. That’s it! That’s the conditional. It’s one whole line long. Now we can separate any concerns we want, because I’m satisfied that an inevitable change in the <code class="highlighter-rouge">post_meta</code> keys won’t make me update five of the same things – it’ll only make me update four.</p>

<h2 id="conclusions">Conclusions</h2>
<p>There’s a ton of other stuff we could do to make this look even better, but this took me three hours to write. Go have a drink! You know this code is rock solid. I mean, you did make sure all the <code class="highlighter-rouge">post_titles</code> were unique, right? …right? …Bueller?</p>]]></content><author><name>Benji</name></author><category term="Tutorials" /><category term="WordPress" /><summary type="html"><![CDATA[But stuff rarely is, is it? This week we did a thing on a website. It required us to create or update something, depending on whether or not that thing exists. Simple enough, if you’re copy and pasting, but still time consuming when you’re writing DRY code.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/organize_and_update.jpg" /><media:content medium="image" url="https://www.monjibram.com/assets/images/organize_and_update.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Secrets of the Site Container: Part 2</title><link href="https://www.monjibram.com/site-containers-two/" rel="alternate" type="text/html" title="Secrets of the Site Container: Part 2" /><published>2020-08-08T00:00:00-04:00</published><updated>2020-08-08T00:00:00-04:00</updated><id>https://www.monjibram.com/site-containers-two</id><content type="html" xml:base="https://www.monjibram.com/site-containers-two/"><![CDATA[<p>Containers are functional. Containers are necessary. Without them you’re exploring the great unknown of horizontal scrolling on a vertical page. Holding shift when you torque the mousewheel. It isn’t too much to ask to make it beautiful, though, is it?</p>

<p>Well, to be honest, most of the time that answer is yes. Function always comes before form, and things aren’t going to work better if you add bells and whistles. I really, truly believe that isn’t just my Pennsylvania Dutch heritage telling me that it doesn’t get better than hand-built Amish furniture. <em>These hills are in my blood.</em></p>

<p>But we do need creativity and freedom. We need to show that we aren’t constrained. Sometimes breaking the rules just enough is proving that you knew the real rules all along. 🥃🕶🚬</p>

<p>What a meta, over-philosophical introduction to another blog about <a href="/secrets-of-site-containers/">site containers</a>!</p>

<h2 id="making-boxes-that-arent-quite-in-the-middle">Making boxes that aren’t quite in the middle</h2>
<p>What if you want to blow out an image all the way to the side of the screen? No site container on that side. Full width. But the other side matches your margin perfectly. Something like…</p>

<div style="width: 100%; border: dashed black 1px; margin-bottom: 30px;">
  <img src="/assets/images/this.webp" alt="like this" style="height: auto; width: calc(50% + 200px); max-width: 95%; margin: 0 0 0 auto; display: block;" />

  <div class="container-sample" style="margin: 0 auto; width: 400px; max-width: 90%; text-align: justify; background-color: #FFE83F;">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Curabitur blandit tempus porttitor. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</div>
</div>

<p>It makes things easier if you consider the two ‘halves’ of your screen like this:</p>
<div style="width: 100%; border: dashed black 1px; margin-bottom: 30px; position: relative;">
  <img src="/assets/images/this.webp" alt="like this" style="height: auto; width: calc(50% + 200px); max-width: 95%; margin: 0 0 0 auto; display: block;" />

  <div class="middle-line-example" style="margin: 0 auto; position: absolute; height: 100%; width: 0; top: 0; left: 50%; transform: translate(-50%, 0); border-left: dashed black 1px;"></div>


  <div class="container-sample" style="margin: 0 auto; width: 400px; max-width: 90%; text-align: justify; background-color: #FFE83F;">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Curabitur blandit tempus porttitor. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</div>
</div>

<p>The right side of that image is blowing out to 50%! Dead simple. The left side is <em>exactly half of the site container’s width</em>. The only remaining magic is to push the block toward the side you’re locking it on with an automatic margin. Here’s the code for that.</p>

<figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nc">.that-img-container</span> <span class="p">{</span>
  <span class="c1">// make sure that bad boy is a block element, of course</span>
  <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
  <span class="c1">// 50% + half of the container in pixels</span>
  <span class="nl">width</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="m">50%</span> <span class="o">+</span> <span class="m">200px</span><span class="p">);</span>
  <span class="c1">// 50% + half of the maximum container in percents</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">95%</span><span class="p">;</span>
  <span class="c1">// push it right</span>
  <span class="nl">margin-left</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>How about a container for text, next to that image? You might be tempted to do heavy math on that. Don’t do heavy math on that.</p>

<div style="width: 100%; border: dashed black 1px; margin-bottom: 30px; position: relative;">
  
  <div class="blowout-container-sample" style="display: flex; align-items: center; width: calc(50% + 200px); max-width: 95%; margin: 0 0 0 auto;">
    <div style="width: 100px; margin-right: 20px; font-weight: bold;">Some text on the left</div>
    <img src="/assets/images/this.webp" alt="like this" style="height: auto; width: calc(100% - 120px); display: block;" />
  </div>


  <div class="middle-line-example" style="margin: 0 auto; position: absolute; height: 100%; width: 0; top: 0; left: 50%; transform: translate(-50%, 0); border-left: dashed black 1px;"></div>


  <div class="container-sample" style="margin: 0 auto; width: 400px; max-width: 90%; text-align: justify; background-color: #FFE83F;">Cras justo odio, dapibus ac facilisis in, egestas eget quam. Curabitur blandit tempus porttitor. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</div>
</div>

<p>The code:</p>

<figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nc">.that-img-container</span> <span class="p">{</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">flex-wrap</span><span class="p">:</span> <span class="nb">nowrap</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="m">50%</span> <span class="o">+</span> <span class="m">200px</span><span class="p">);</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">95%</span><span class="p">;</span>
  <span class="nl">margin-left</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.side-text</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100px</span><span class="p">;</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="m">20px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.image</span> <span class="p">{</span>
  <span class="c1">// everything but the text and margins</span>
  <span class="nl">width</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="m">100%</span> <span class="o">-</span> <span class="m">120px</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h2 id="making-things-that-arent-a-box">Making things that aren’t a box</h2>
<p>Let’s say you have a thing that isn’t a square, or doesn’t require constraining at all. That thing might not flow at the same speed as your page content. It might not even be positioned relative to it. The easy answer for that is <code class="highlighter-rouge">position</code> itself. Which has the potential to negate a lot of the power of a site container as well.</p>

<dl>
  <dt><code class="highlighter-rouge">position: static;</code></dt>
  <dd>The default. Should work the same as <code class="highlighter-rouge">unset</code>, so this is what you do if you have to override somebody else’s work, but you also want them to think you’re smart (read: force them to look up your solution).</dd>
  <dt><code class="highlighter-rouge">position: relative;</code></dt>
  <dd>Makes everything tick. It’s a way to set the parent for all of your <code class="highlighter-rouge">position</code> children.</dd>
  <dt><code class="highlighter-rouge">position: absolute;</code></dt>
  <dd>Ignores block positioning. It lets things go on top of (or underneath) other things. It refers back to most recent <code class="highlighter-rouge">position</code>-assigned parent to determine its place. If none is available, it’s positioned on <code class="highlighter-rouge">&lt;body&gt;</code> itself. It then uses <code class="highlighter-rouge">top</code>, <code class="highlighter-rouge">bottom</code>, <code class="highlighter-rouge">left</code>, or <code class="highlighter-rouge">right</code> to determine coordinates on that element.</dd>
  <dt><code class="highlighter-rouge">position: fixed;</code></dt>
  <dd>Like <code class="highlighter-rouge">absolute</code> on crack. Ignores block positiong and parents. Almost always a terrible idea, especially for accessibility. So of course I’ve used it in a final build!</dd>
  <dt><code class="highlighter-rouge">position: sticky;</code></dt>
  <dd>The fun uncle. Make things stick at a certain point, but only inside of the parent. Not supported by IE, but generally it doesn’t matter – most standard uses <a href="https://www.w3.org/wiki/Graceful_degradation_versus_progressive_enhancement">degrade gracefully</a>.</dd>
</dl>

<h2 id="the-centered-thing">The centered thing.</h2>
<p>This might be amateur hour but here’s how to center a thing that is absolutely positioned.</p>

<figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nc">.thing-parent</span> <span class="p">{</span> <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.thing</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="c1">// parent container percents</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span> <span class="nl">left</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>

  <span class="c1">// child item percents </span>
  <span class="nl">transform</span><span class="p">:</span> <span class="nf">translate</span><span class="p">(</span><span class="m">-50%</span><span class="o">,</span> <span class="m">-50%</span><span class="p">);</span>
  <span class="c1">// (to make its center the target, subtract 50% of each axis)</span>
<span class="p">}</span></code></pre></figure>

<p>But did you know, for example, that padding, borders, margins all flow <em>outside</em> of that position?</p>

<div style="width: 100%; position: relative; height: 100px; border: dashed 1px #F96714">
  <div style="position: absolute; width: 100%; padding: 10px; top: 50%; left: 50%; transform: translate(-50%, -50%); border: dashed 1px #77212E">Here's an example of that. The text will flow normally inside of the container, but you'll have to fix the space around the item separately...</div>
</div>

<div style="width: 100%; position: relative; height: 200px; border: dashed 1px #F96714; margin-top: 20px;">
  <div style="position: absolute; width: calc(100% - 22px); padding: 10px; top: 50%; left: 50%; transform: translate(-50%, -50%); border: dashed 1px #77212E">... like this! Account for the padding, the border-width, and the margins. Usually they're the same on both sides of the item, so you can just multiply them by two: <br /><code>width: calc(100% - (padding + border + margin) * 2);</code></div>
</div>

<h2 id="position-containers">Position Containers</h2>
<p>Containers <em>need</em> to be relatively positioned (if they are positioned at all) to your document’s <code class="highlighter-rouge">&lt;body&gt;</code>, or they will likely lose their pinpoint mathematical accuracy and throw in extra space.</p>

<p>Positioning other things inside of a well-built site container is fair game, as long as you know exactly how big the things are. Using default-styled things like <code class="highlighter-rouge">&lt;p&gt;</code> and <code class="highlighter-rouge">&lt;h1&gt;</code>? You’re studdenly worrying about the default bottom margins, and the total height of the element. If something looks off optically, you can use my debugging reticle:</p>

<figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nc">.top-left</span><span class="o">,</span> <span class="nc">.top-right</span><span class="o">,</span> <span class="nc">.bottom-left</span><span class="o">,</span> <span class="nc">.bottom-right</span> <span class="p">{</span>
	<span class="nl">height</span><span class="p">:</span> <span class="m">40px</span><span class="p">;</span> <span class="nl">width</span><span class="p">:</span> <span class="m">40px</span><span class="p">;</span>
	<span class="nl">border</span><span class="p">:</span> <span class="no">tomato</span> <span class="nb">solid</span> <span class="m">1px</span><span class="p">;</span>
	<span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
	<span class="nl">top</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
	<span class="nl">left</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.top-left</span> <span class="p">{</span>
	<span class="nl">border-left</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="nl">border-top</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="nl">transform</span><span class="p">:</span> <span class="nf">translate</span><span class="p">(</span><span class="m">-100%</span><span class="o">,</span> <span class="m">-100%</span><span class="p">);</span>
<span class="p">}</span>
<span class="nc">.top-right</span> <span class="p">{</span>
	<span class="nl">border-right</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="nl">border-top</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="nl">transform</span><span class="p">:</span> <span class="nf">translate</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">-100%</span><span class="p">);</span>
<span class="p">}</span>
<span class="nc">.bottom-left</span> <span class="p">{</span>
	<span class="nl">border-left</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="nl">border-bottom</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="nl">transform</span><span class="p">:</span> <span class="nf">translate</span><span class="p">(</span><span class="m">-100%</span><span class="o">,</span> <span class="m">0</span><span class="p">);</span>
<span class="p">}</span>
<span class="nc">.bottom-right</span> <span class="p">{</span>
	<span class="nl">border-right</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="nl">border-bottom</span><span class="p">:</span> <span class="n">unset</span><span class="p">;</span>
	<span class="c1">// no need to transform, we're already there</span>
<span class="p">}</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"your-container"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"top-left"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"top-right"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"bottom-left"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"bottom-right"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<h2 id="and-then-there-was-nothing">And then there was… nothing!</h2>
<p>You are now a master. I can teach you nothing more. But if you wish, we may start considering the almighty <code class="highlighter-rouge">display: grid;</code> and its infinitely complex version of the exact same things I mention above.</p>

<p>Grid is always fun. It is really powerful. But it also reminds me of the days when we encapsulated entire pages in tables. Let’s save that for layout decisions, menus, and other places where it’s actually needed!</p>]]></content><author><name>Benji Kostenbader</name></author><category term="Tutorials" /><category term="Featured" /><summary type="html"><![CDATA[Containers are functional. Containers are necessary. Without them you’re exploring the great unknown of horizontal scrolling on a vertical page. Holding shift when you torque the mousewheel. It isn’t too much to ask to make it beautiful, though, is it?]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/pretty-container.webp" /><media:content medium="image" url="https://www.monjibram.com/assets/images/pretty-container.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Secrets of the Site Container: Part 1</title><link href="https://www.monjibram.com/secrets-of-site-containers/" rel="alternate" type="text/html" title="Secrets of the Site Container: Part 1" /><published>2020-07-24T00:00:00-04:00</published><updated>2020-07-24T00:00:00-04:00</updated><id>https://www.monjibram.com/secrets-of-site-containers</id><content type="html" xml:base="https://www.monjibram.com/secrets-of-site-containers/"><![CDATA[<p>Big screens are getting bigger. Wider. Less expensive. Our web experience should be seamless, but our eyes can’t adjust to giant blobby things. Containers to the rescue. But first, a digression about font-size and readability!</p>

<hr />

<h4 style="margin: -25px 0 20px; line-height: 1.1; font-weight: 500;"><strong>Disclaimer!</strong> This page may scroll horizontally. It's ironic, because it's about site containers.</h4>
<hr />

<h2 id="theres-a-problem-with-your-eyes">There’s a problem with your eyes</h2>
<p>You can’t read long lines of text. The common recommendation is between <a href="https://www.smashingmagazine.com/2014/09/balancing-line-length-font-size-responsive-web-design/">45 and 75 characters per line</a>. You may have experienced this issue when you tried to use your TV as a monitor. Wait you never did that? Oh, no, me either 😅</p>

<p>Imagine that length as two or three alphabets, back to back. Of course the length of the alphabet depends on how large the character widths are. In this particular body font, I can get a better sense by incorporating capitalized letters. Or I could even use them outright.</p>

<p>Just about this long:
abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz</p>

<p>Maybe this long:
AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz</p>

<p>Or even this long:
ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZ</p>

<h2 id="but-really-big-views-are-bad-too">But really big views are bad too</h2>
<p>The unspoken flip-side comes from larger font sizes at a close distance. Making the text larger for larger screens only works until your <a href="https://en.wikipedia.org/wiki/Saccade">saccade</a> becomes noticeably uncomfortable. Thus a rather fine case <a href="https://baymard.com/blog/line-length-readability">against a purely liquid layout</a>. For large web views, I err on the side of caution. I keep font-size the same on even the largest screens. So something beyond 750px is bad.</p>

<h2 id="compare-the-next-two-paragraphs">Compare the next two paragraphs:</h2>
<h3 id="paragraph-1">Paragraph 1:</h3>
<div style="font-size: 20px; line-height: 1.1; letter-spacing: 1.2px; width: 565px;">Nullam id dolor id nibh ultricies vehicula ut id elit. Cras mattis consectetur purus sit amet fermentum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, fermentum massa justo sit amet risus. <br /><br />
abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz</div>

<h3 id="paragraph-2">Paragraph 2:</h3>
<div style="font-size: 40px; line-height: 1.2; letter-spacing: 1.5px; width: 1045px; margin-bottom: 35px;">Nullam id dolor id nibh ultricies vehicula ut id elit. Cras mattis consectetur purus sit amet fermentum. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, fermentum massa justo sit amet risus. <br /><br />
abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz</div>

<blockquote>
  <p>The larger text made it hard to move from the end of one line to the start of the next. Either it’s because you’re scrolling around, or just because your screen was so big that your eye movement was unnatural.</p>
</blockquote>

<h2 id="honestly-this-doesnt-really-change-with-non-text-items">Honestly this doesn’t really change with non-text items</h2>

<p>A huge image doesn’t help. Even disregarding image sizing and web optimization (our rule at work is twice the pixels for each web pixel, so we get some pretty large picture file sizes!) you’ll quickly lose a picture of a forest for some giant trees.</p>

<p>The solution to this is the same as most other web design problems: a few extra tag wrappers and some CSS. But <em>how</em> is the more important question. That’s how this blog was born.</p>

<h2 id="zero-use-appropriate-html">Zero. Use appropriate HTML</h2>

<p>The sectional approach to site configuration is underrated. A good page has content sections, and they are usually at least 2/3 the height of your browser window. Taking up space and using the infinite scroll canvas that is available to you dramatically increases user interaction and readability. There is also a great reason that HTML has a <code class="highlighter-rouge">&lt;section&gt;</code> tag! It’s for holding this container! Use it like this:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"hero"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hero-container"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- your div contents --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span></code></pre></figure>

<p><em>Note: Your section tag might have a full-width background image or other width-breaking things. Don’t limit yourself by making the section tag itself a container.</em></p>

<h2 id="one-start-at-the-maximum-which-is-actually-the-smallest">One. Start at the maximum, which is actually the smallest.</h2>

<p>What’s the maximum width that your section can be? The answer might not make immediate sense. <code class="highlighter-rouge">max-width</code> should be used on your smallest screen sizes. The narrowest screen I’ve seen on devtools is the iPhone 5/SE, weighing in at a mere 325px. If your maximum width is above that, your site will horizontally scroll on that screen. If you use absolute units, your page will forever be confined to 325px.</p>

<div style="display: flex; flex-wrap: no-wrap; justify-content: center; align-items: flex-grow; margin-bottom: 20px;">
  <div style="width: calc((100% - 330px) / 2); background-color: #350e1411;"></div>
  <p style="width: 320px; margin: 20px auto 25px; padding-bottom: unset;">Don't make your site live in a world that is only 325 px wide, it is a special place where UX dreams go to die and nothing can be accomplished. Two sentences of this took up six lines and looked terrible.</p>
  <div style="width: calc((100% - 330px) / 2); margin-left: -5px; background-color: #350e1411;"></div>
</div>

<p>Instead, you need a <em>relative-unit based</em> <code class="highlighter-rouge">max-width</code> to account for things. I use percentages, because they are based on your container’s size. If your container is <code class="highlighter-rouge">&lt;body&gt;</code>, that’s great, but even if you’re dealing with a strange outer container this won’t break width as a <code class="highlighter-rouge">vw</code> might.</p>

<p>So what percentage? If it’s a hero section it’ll probably be at the widest your screen allows, but it should never break the horizontal dimensions of your device. So that’s <code class="highlighter-rouge">100%</code>. Text also needs to breathe, so text on a small screen should be <code class="highlighter-rouge">90-95%</code>. A card or something that is supposed to visually break the monotony of the left edge can creep in more, but after <code class="highlighter-rouge">85%</code> things start to get silly.</p>

<figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nc">.hero-container</span> <span class="p">{</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.text-container</span> <span class="p">{</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">95%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.narrow-container</span> <span class="p">{</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h2 id="two-move-on-to-bigger-and-better-screens">Two: Move on to bigger and better screens.</h2>

<p>We’ve determined that text should live somewhere between <code class="highlighter-rouge">600px-750px</code>. Once we find that sweet spot, that’s really the size we want. So let’s use that as our <code class="highlighter-rouge">width</code>!</p>

<p>Other widths will make sense too. Most images look great at between <code class="highlighter-rouge">1280-1500px</code>, your modern laptop screen width. If it’s a group of cards or items, they might follow the same path, though individual items with paragraphs will follow the same text readability rule.</p>

<p>Our outlying ‘monotony breakers’ can live somewhere between a paragraph and a hero.</p>

<figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nc">.hero-container</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">1500px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.text-container</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">750px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">95%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.narrow-container</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">1100px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h2 id="left-of-center">Left of center</h2>

<p>Browsers automatically place blocks starting from the left. Your screen probably looks like this:</p>
<div style="height: 100px; max-width: 100%; width: 1500px; background-color: #2A4B7C44;"></div>
<div style="height: 100px; max-width: 90%; width: 1100px; background-color: #350e1444;"></div>
<div style="height: 100px; max-width: 95%; width: 750px; background-color: #264E3644; margin-bottom: 20px;"></div>

<p>Well that isn’t surprising! Block-level elements fill from the left. All you need to do is center those elements on the screen and you’re set. <code class="highlighter-rouge">display: flex;</code> will accomplish this, but changing your overall display feels like overkill. All you need is some sort of automatic margin on both sides of your section, to keep it centered. You know, like <code class="highlighter-rouge">margin: 0 auto;</code>.</p>

<figure class="highlight"><pre><code class="language-scss" data-lang="scss"><span class="nc">.hero-container</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">1500px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.text-container</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">750px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">95%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.narrow-container</span> <span class="p">{</span>
  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">1100px</span><span class="p">;</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">90%</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h2 id="tada">Tada!</h2>

<div style="margin: 0 auto; height: 100px; max-width: 100%; width: 1500px; background-color: #2A4B7C44;"></div>
<div style="margin: 0 auto; height: 100px; max-width: 90%; width: 1100px; background-color: #350e1444;"></div>
<div style="height: 100px; max-width: 95%; width: 750px; background-color: #264E3644; margin: 0 auto 20px;"></div>

<h2 id="next-steps">Next steps:</h2>

<p>What if you want to blow out the screen, anchoring items to the left or right on one side while maintaining your site container width on the other? It’s not impossible. <a href="/site-containers-two/">I’ll show you how in my next article</a>!</p>

<blockquote>
  <p>You can also <a href="https://codepen.io/benjithaimmortal/full/XWXyJjX">see this blog in action on CodePen</a>.</p>
</blockquote>]]></content><author><name>Benji Kostenbader</name></author><category term="Tutorials" /><summary type="html"><![CDATA[Big screens are getting bigger. Wider. Less expensive. Our web experience should be seamless, but our eyes can’t adjust to giant blobby things. Containers to the rescue. But first, a digression about font-size and readability!]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/containers.webp" /><media:content medium="image" url="https://www.monjibram.com/assets/images/containers.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Less Than 365 Days of Code</title><link href="https://www.monjibram.com/get-a-life/" rel="alternate" type="text/html" title="Less Than 365 Days of Code" /><published>2020-07-04T00:00:00-04:00</published><updated>2020-07-04T00:00:00-04:00</updated><id>https://www.monjibram.com/get-a-life</id><content type="html" xml:base="https://www.monjibram.com/get-a-life/"><![CDATA[<p>You should be a part of your local software community. You need to learn things. You probably don’t need to learn <em>all</em> of the things, but it’s good for you to learn most of them. You’re supposed to be an expert. But you should also probably have a life.</p>

<p>I recently joined <a href="https://twitter.com/monjibram">Twitter</a>. I jumped on that smoldering, outdated bandwagon. It was a sad day for my productivity. I’m learning lots of small things, like how to short-circuit instead of using an <code class="highlighter-rouge">if</code> block and which order to assign styles for <code class="highlighter-rouge">&lt;a&gt;</code> tags. I’m also learning that it’s been <strong>#100daysofcode</strong> since forever, and <em>“if you just do this an hour a day, you’ll be famous/rich/happy”</em>. I don’t think I want to do Twitter an hour every day.</p>

<p>It’s July 4th today. Yes, I didn’t write this ahead of time, it’s literally the night of July 4th. I’m sitting here listening to the entire western half of Pennsylvania erupt in joyous war sounds. I am not quite hiding in a closet. Not quite.</p>

<p>Today I played in an inflatable pool. I rode a bike. I ate hot dogs and watermelon and ice cream. I went to a park. But I will tell you what I didn’t do:</p>

<blockquote>
  <p>I DID NOT CODE TODAY.</p>
</blockquote>

<p>I haven’t done it since Thursday. I took a few days off. And you should too! This is an underrated and important thing about your life: it is more than your job.</p>

<h2 id="why-you-are-here">Why you are here</h2>
<p>I’ve been trained in classical theology and exegesis. I have some pretty set ideas on why we exist. I’m going to simplify them a bit for the sake of <em>the unanimous acceptance of my ideas</em>, and also because it would likely bore you.</p>

<blockquote>
  <p>We exist to do good.</p>
</blockquote>

<p>So there’s the basic doing good with little things, which doesn’t feel very fun. You can do good by writing your name, and it will please your parents, and maybe you’ll get a few points on the SAT (I am old, I don’t know this for sure anymore.) If you write it enough, maybe it will look beautiful! Now you’re sort of pleasing people with art.</p>

<p>That’s also how your job looks, compared to your life. You can do it well, and get paid money for it, and maybe even sort of please other people with how awesome you are. It’s important enough, in its own right. Maybe you’re so good at it that you help <em>other people</em> work. But your job is also a job. If you quit tomorrow, it will no longer be about you. It will no longer be <em>your</em> good.</p>

<h2 id="ways-you-can-do-good">Ways you can do good</h2>
<p>There is a more tangible and lasting good you can do, and it feels better than anything you accomplish for money. For some people, this is having a family. I have a family. They’re cool. You might have already hear that <em>if you spend one hour every day on your family, you’re going to have an awesome family</em>. Maybe you can/should spend a little bit more than that. Hey, if I post that on Twitter will 3,000 little birds heart it?</p>

<p>Of course you don’t need a literal family to do good. Your contributions to your friends and your community make them a little bit like a family too. If you invest in the lives of those people, they might indeed feel that your part of their life was a formative part, and you’ll live on vicariously through their successes, and help to share some of the weight of their tribulations. That’s also doing good.</p>

<h2 id="how-to-think-about-doing-good">How to think about doing good</h2>
<p>Maybe the most important part of doing good is that <strong><em>it really isn’t about you at all</em></strong>. If you’re doing it right, you are not doing good to achieve something personal. You’re just pushing up the human race a little bit more.</p>

<blockquote>
  <p>Whoever wants to save their life will lose it…</p>
</blockquote>

<p>It might seem a bit antithetical, but to truly be a good-doer you can’t be in it for the reward of being a good-doer. You need to be there for the others.</p>

<p>Managers might understand this on another level. To manage people effectively you need to weigh their immediate value to the company, but you also need to consider their needs and ambitions. Honestly investing in your employee’s wellbeing can very well turn them into an extension of your own will.</p>

<p>This is why it’s so hard to really do good at a job. I had one of the best good-doer jobs ever. I got to teach kids (in English) how to be world leaders. But I quickly found some major impediments to calling that ‘my good’:</p>

<dl>
  <dt>I got paid</dt>
  <dd>That was a thing I did for money, and sometimes that fourth-wall was broken, by my students, my coworkers, and even myself.</dd>
  <dt>Other people co-owned that good</dt>
  <dd>Someone was investing money in it, but it wasn’t me. It was never really my piece of good to begin with. I honestly can’t see where I ended and it began, anyway.</dd>
  <dt>There was an ulterior motive</dt>
  <dd>You may not understand this if you’re not in the do-gooder profession. There’s a specific reason for any public works job. Sometimes you are forced to skip that thing that could really change one life in order to keep doing the good your job needs.</dd>
</dl>

<p>That’s not to say that I didn’t try hard to dedicate my time to make up for those situations. I did! But sometimes they were just out of my control.</p>

<p>It’s been the opposite with my family and social contributions. I felt a stronger impact serving, volunteering, and leading community work than the entire summation of my career. And I feel a certain sort of expectation while watching my son have his own adventures. I have poured my love into him so that he can have a great life, and in return I feel so vicariously happy when he succeeds.</p>

<h2 id="why-did-i-write-this">Why did I write this?</h2>
<p>Because I think your code isn’t the only part of you. It shouldn’t even be the main part. You are alive for a reason, and you are the good you want to see in the world.</p>

<p>So take a break. Refocus on what’s important. Make love, not war. And <em>please, for the love of humanity, cool it with the fireworks</em>.</p>]]></content><author><name>Benji Kostenbader</name></author><category term="Life" /><category term="Featured" /><summary type="html"><![CDATA[You should be a part of your local software community. You need to learn things. You probably don’t need to learn all of the things, but it’s good for you to learn most of them. You’re supposed to be an expert. But you should also probably have a life.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/life.webp" /><media:content medium="image" url="https://www.monjibram.com/assets/images/life.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">WP Custom Post Types but Free</title><link href="https://www.monjibram.com/jekyll-custom-post-types/" rel="alternate" type="text/html" title="WP Custom Post Types but Free" /><published>2020-06-27T00:00:00-04:00</published><updated>2020-06-27T00:00:00-04:00</updated><id>https://www.monjibram.com/jekyll-custom-post-types</id><content type="html" xml:base="https://www.monjibram.com/jekyll-custom-post-types/"><![CDATA[<p>Sometimes you’re good at more than one type of thing. That’s OK, you’re human. We like to categorize things and study them logically to distinguish them from each other. We argue about definitions. We like tables. We like lists. We make Custom Types for everything.</p>

<p>What’s <em>not</em> so OK is if you’re developing on a “simple” blog templating tool and you think you can’t. Those things only do blogs, right? The type of data you’re storing is a blog. The metadata on those posts is standard. You can’t well use that for recipes AND blogs. Just make a <code class="highlighter-rouge">recipes</code> tag and call it a day.</p>

<p>Luckily that’s not true at all… you can automate almost anything you want with a little ingenuity, and automation is the key to efficient web work. In most cases I’m learning Jekyll was actually built for this sort of automation, but the documentation isn’t always very helpful to show you <a href="https://jekyllrb.com/docs/liquid/">how to use it</a>.</p>

<h2 id="meta-meta">Meta-meta</h2>
<p>In part one <a href="/jekyll-custom-fields/">we talked about Liquid</a>, and how to use it to make ACF-like custom fields on your static marketing site. That’s all well and good if you’ve got individual pages that you want to clone. But what about whole categories of content?</p>

<h2 id="meta-meta-meta">Meta-meta-meta</h2>
<p>WordPress calls that stuff Custom Post Types. It’s based on the idea that you want <code class="highlighter-rouge">posts</code> for writing things, but you also want a <code class="highlighter-rouge">projects</code> section that shows off your wow mad skillz. You’d probably like to query those <code class="highlighter-rouge">projects</code> independently of the <code class="highlighter-rouge">posts</code>. And maybe you’d like some <code class="highlighter-rouge">events</code>, <code class="highlighter-rouge">programs</code>, <code class="highlighter-rouge">cats</code>, and <code class="highlighter-rouge">hairpieces</code>. Your business is not the strangest thing on the internet, I promise.</p>

<p>All of those types are still going to generate data in the same way a blog would. You’ll have an index, an author, a post-date, a title, and some contents. You’ll have a single template for the files, with whatever custom metadata you like, and you can query a list of all of the fields in some format to make it easy for people to search and peruse.</p>

<h2 id="custom-post-types-are-called-collections">Custom Post Types are called Collections</h2>
<p>As we know, Jekyll is a blog generator! Jekyll does the bloggy parts of this just fine. It also has built-in functionality for Custom Post Types that work in tandem with the blog. The creators of Jekyll, having no ties to WordPress that I know of, decided <em>not</em> to name their custom post types Custom Post Types. They call them Collections.</p>

<p>In 5 years of building Jekyll sites, I never came across a Collection. I didn’t know what it was. (Before I had a full-time development job, I didn’t even know why I would need something like it.) But it is pretty darn swanky! It can do everything that a WordPress CPT can do, and pre-render the pages as they are built.</p>

<blockquote>
  <p>Pre-rendered for your viewing pleasure</p>
</blockquote>

<p>I will say that again, louder. It can do all of the work to render a list of these blogs <em>one time</em> and <em>store the results</em> to be served instantly. If the build time takes an extra ten minutes, it’s not a bother for your end users. If you come from a WordPress background (or most full-stack projects), this might take some getting used to.</p>

<h2 id="old-way-of-thinking">Old Way of thinking:</h2>

<p>This is a common thought process for a WordPress developer:</p>
<ul>
  <li>I need only the posts within a certain Post Type, with a certain field.</li>
  <li>I need to loop through them and grab a connecting ID for other post types.</li>
  <li>Then I need to loop through <em>those IDs</em> and display their special metadata.</li>
</ul>

<h3 id="really-bad-but-easy-to-follow-example">Really bad but easy to follow example</h3>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$artist_query</span> <span class="o">=</span> <span class="nf">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
  <span class="s1">'numberposts'</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>      <span class="c1">// all of 'em</span>
  <span class="s1">'post_type'</span>   <span class="o">=&gt;</span> <span class="s1">'artist'</span>
<span class="p">));</span>

<span class="c1">// iterate through all the Artists after a single query</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$artist_query</span> <span class="k">as</span> <span class="nv">$artist</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$artist</span><span class="o">-&gt;</span><span class="no">ID</span><span class="p">;</span>

  <span class="c1">// making queries inside of loops is baaaaaad news</span>
  <span class="nv">$art_query</span> <span class="o">=</span> <span class="nf">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'numberposts'</span>  <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s1">'post_type'</span>    <span class="o">=&gt;</span> <span class="s1">'art'</span><span class="p">,</span>
    <span class="s1">'meta_key'</span>     <span class="o">=&gt;</span> <span class="s1">'artist'</span><span class="p">,</span>
    <span class="s1">'meta_value'</span>   <span class="o">=&gt;</span> <span class="nv">$id</span>
  <span class="p">));</span>
<span class="p">}</span></code></pre></figure>

<p>Looping through multiple large queries is going to slow down your page. Maybe you should just index those files yourself in some post meta and make things easier to find. Make a cron and keep things synchronized. If you’re getting fancy here, you might jump into the database itself with a <code class="highlighter-rouge">JOIN</code>. It’s going to depend a lot on the size of your indexing lines, to be sure.</p>

<h3 id="real-world-indexing-example">Real world indexing example</h3>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="c1">// start by iterating through all the Artists to set up the index</span>
<span class="nv">$artists</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$all_artists</span> <span class="k">as</span> <span class="nv">$artist</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$artist</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">];</span>
  <span class="nv">$artists</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'ID'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$id</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// then do the same with each piece of Art</span>
<span class="nv">$art</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$all_art</span> <span class="k">as</span> <span class="nv">$work</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$work</span><span class="p">[</span><span class="s1">'ID'</span><span class="p">];</span>
  <span class="nv">$art</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'ID'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$id</span><span class="p">;</span>
  <span class="nv">$art</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'artist_id'</span><span class="p">]</span> <span class="o">=</span> <span class="nf">get_field</span><span class="p">(</span><span class="s1">'artist'</span><span class="p">,</span> <span class="nv">$id</span><span class="p">);</span> <span class="c1">// yeah, this was an ACF too</span>

  <span class="c1">// add only what you need from the Art CPT in the Artist array</span>
  <span class="nv">$a_id</span> <span class="o">=</span> <span class="nv">$art</span><span class="p">[</span><span class="nv">$id</span><span class="p">][</span><span class="s1">'artist_id'</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$artists</span><span class="p">[</span><span class="nv">$a_id</span><span class="p">][</span><span class="s1">'art'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$artists</span><span class="p">[</span><span class="nv">$a_id</span><span class="p">][</span><span class="s1">'art'</span><span class="p">][</span><span class="nv">$id</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="nv">$id</span><span class="p">,</span>
      <span class="nv">$work</span><span class="p">[</span><span class="s1">'post_title'</span><span class="p">]</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="i-digress">I digress</h2>
<p>Once again, <em>you really don’t have to worry about all that optimization with a static site!</em> It indexes and builds itself. Users will see all that automation like you did it by hand. These days static sites are even smart enough to know when you’re changing files, and do <a href="https://jekyllrb.com/docs/configuration/incremental-regeneration/">incremental builds</a> which are smart enough to keep those complicated queries from slowing down your whole site build every time. You won’t waste time either.</p>]]></content><author><name>Benji Kostenbader</name></author><category term="Tutorials" /><category term="Jamstack" /><category term="Featured" /><summary type="html"><![CDATA[Sometimes you’re good at more than one type of thing. That’s OK, you’re human. We like to categorize things and study them logically to distinguish them from each other. We argue about definitions. We like tables. We like lists. We make Custom Types for everything.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/types.jpg" /><media:content medium="image" url="https://www.monjibram.com/assets/images/types.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Wordpress is a Framework</title><link href="https://www.monjibram.com/wordpress-is-a-framework/" rel="alternate" type="text/html" title="Wordpress is a Framework" /><published>2020-06-20T00:00:00-04:00</published><updated>2020-06-20T00:00:00-04:00</updated><id>https://www.monjibram.com/wordpress-is-a-framework</id><content type="html" xml:base="https://www.monjibram.com/wordpress-is-a-framework/"><![CDATA[<p>Lest it fall under the immense weight of my quick and witty Jamstack diatribes, it’s time I defend my dear friend WordPress from a most misleading misconception. WordPress is not simply a CMS. It might be <em>known</em> for its prowess as a CMS, and modern tools might compare themselves to it, but it is much, much more.</p>

<h2 id="but-what-is-a-cms">But what is a CMS?</h2>
<p><strong>C</strong>ontent <strong>M</strong>anagement <strong>S</strong>ystems are <strong>systems</strong> to organize and deliver (<strong>manage</strong>) the <strong>content</strong> of your website in a way that makes sense to you as a business AND integrates with your web framework. That’s the base definition of a CMS: something that holds the data you need to make your website unique.</p>

<p>WordPress is called a CMS because it has a pretty powerful CMS built into it. It can process files, organize them, and do many things to them based on their type. Image files are stored in multiple different, optimized sizes for use in instances at their most convenient size. The directory which stores all of these things (let’s call them <a href="https://en.wikipedia.org/wiki/Digital_asset">assets</a>) is pretty confusing to look at, but it is modifiable and it does its job well enough.</p>

<h2 id="and-what-is-a-framework">And what is a framework?</h2>
<p>A web <strong>framework</strong> on the other hand is a well-known and documented system for deploying content, serving it, and dynamically modifying it. A short and completely unordered list of framework words you’ve probably heard before:</p>

<blockquote>
  <p>Angular, Django, Rails, CodeIgniter, React, Gatsby, Jekyll, Laravel, nodeJS, RedwoodJS, 11ty</p>
</blockquote>

<p>There are front-end frameworks and full-stack frameworks and little tiny frameworks and big, custom frameworks, but they all basically <em>make your website happen</em>. A framework doesn’t need an integrated CMS, but some frameworks have a bit of an opinion on how to store their media. It’s not uncommon.</p>

<h2 id="wordpress-stores-your-assets-for-you">WordPress stores your assets for you</h2>
<p>I said the <code class="highlighter-rouge">/media</code> directory in WordPress is confusing to look at, because it is. But the the administrator console (WP-admin) is not. It has all.of.the.options. It has all.of.the.settings. It quickly becomes familiar, and it really hasn’t changed a lot in modern times.</p>

<p>Content Management Systems don’t need a graphical interface, and they don’t technically need to store your files. A CMS could be as simple as a JSON file. Some people use JSON files! Isn’t that techie of them. Can you use <a href="http://tenorcms.com/">this</a>? I probably could, but I’m lazy. So I don’t.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://json-schema.org/draft-06/schema#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Web Site"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"pages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pages"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Key"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"heading"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Heading"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Body"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"markdown"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"search_enabled"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Search Enabled"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"array"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tags"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An array of tags"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The SEO title of the page, for web crawlers"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Description"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"textarea"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"className"</span><span class="p">:</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The SEO description of the page, for web crawlers"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<h2 id="wordpress-generates-your-pages">WordPress generates your pages</h2>
<p>By 2005, static web content in one file was slowly getting replaced by WYSIWYG editing. WYSIWYG editors are a sort of CMS, but they also translate your designs and content into HTML, or style it and place it on the page in special ways.</p>

<p>WordPress also became quite universally recognized for this! The base ‘content’ field of every WordPress page or post is a WYSIWYG content editor.</p>

<blockquote>
  <p>This is a terrible way to build pages in 2020…
but it was very cool at the time.</p>
</blockquote>

<p>But these days WP developers use templates to make custom page styles. That’s a pretty baked-in and dynamic way to organize data. It’s much more complex than just preserving your content, it’s actually modifying your output.</p>

<h2 id="wordpress-is-decently-opinionated">WordPress is decently opinionated</h2>
<p>One of the great things about software development is ANYTHING IS POSSIBLE. Except that it’s not that great when you have to reopen a cobwebby legacy project that was developed 10 years ago.</p>

<p>There are many ways to do something, but a Framework tells you one recognized way to do it. WordPress is no different. The <a href="https://developer.wordpress.org/reference/functions/">WordPress documentation</a> and <a href="https://www.php.net/manual/en/langref.php">PHP manual</a> (which I reference quite often) have many specific and accepted ways to do something.</p>

<p>You <em>could</em> build URL parameters by concatenating strings. You <em>could</em> manipulate AJAX requests with JavaScript alone. But WordPress has idiomatic ways to do these things. When they’re used properly, those idioms become a part of your life. It never made sense to me that <code class="highlighter-rouge">$args</code> was an appropriately specific name for an array of details to send through a query request. I didn’t think writing out <code class="highlighter-rouge">array()</code> was necessary. Now I do it every time.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'numberposts'</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
  <span class="s1">'post_type'</span>   <span class="o">=&gt;</span> <span class="s1">'muffins'</span>
<span class="p">);</span>

<span class="nv">$all_of_the_muffins</span> <span class="o">=</span> <span class="nf">get_posts</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span></code></pre></figure>

<p>This indicates that WordPress is moderately <em>opinionated</em> about how you should use its tooling. That’s not a CMS thing, that’s a Framework thing.</p>

<h2 id="wordpress-knows-who-you-are">WordPress knows who you are</h2>
<p>There are a number of other things that make WordPress much more than a CMS. For instance, a CMS doesn’t usually take pride in its authentication and user roles, and yet those are a thing that WordPress does. <a href="https://ilikekillnerds.com/">Dwayne Charrington</a> does a decent job of explaining a these in <a href="https://www.quora.com/Is-WordPress-a-PHP-framework/answer/Dwayne-Charrington">this Quora answer</a>.</p>

<p>Just because it’s marketed to business as a standardized and easy-to-use product, it’s entirely unfair to put WordPress in the CMS box.</p>]]></content><author><name>Benji Kostenbader</name></author><category term="WordPress" /><category term="Featured" /><summary type="html"><![CDATA[Lest it fall under the immense weight of my quick and witty Jamstack diatribes, it’s time I defend my dear friend WordPress from a most misleading misconception. WordPress is not simply a CMS. It might be known for its prowess as a CMS, and modern tools might compare themselves to it, but it is much, much more.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/framework.webp" /><media:content medium="image" url="https://www.monjibram.com/assets/images/framework.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">WordPress Custom Fields but Free</title><link href="https://www.monjibram.com/jekyll-custom-fields/" rel="alternate" type="text/html" title="WordPress Custom Fields but Free" /><published>2020-06-13T00:00:00-04:00</published><updated>2020-06-13T00:00:00-04:00</updated><id>https://www.monjibram.com/jekyll-custom-fields</id><content type="html" xml:base="https://www.monjibram.com/jekyll-custom-fields/"><![CDATA[<p>Cutting-edge web technologies don’t always document features. Either they lack the ability to convey the full scope of their power from the first release, or they release new features gradually after the MVP. That’s pretty much the opposite of the old guard of incredible WordPress plugins. A personal favorite static framework of mine is Jekyll, because it’s simple. But I guess it isn’t so simple after all.</p>

<p>Jekyll is known as a tool for making your blog. The <code class="highlighter-rouge">&lt;h1&gt;</code> on <a href="https://jekyllrb.com">jekyllrb.com</a> is… uh, well, actually, it’s the Jekyll logo. But the hero text is “Transform your plain text into static websites and blogs.” Did you know you can make a blog with Jekyll? If not, perhaps you should reat about it:</p>

<blockquote>
  <p>“Jekyll is built with Ruby, and is most often used for blogs and personal projects” –<a href="https://www.netlify.com/blog/2016/05/02/top-ten-static-website-generators/">Netlify</a></p>
</blockquote>

<blockquote>
  <p>“A simple, blog-aware, static site generator” –<a href="https://www.staticgen.com/">staticgen.com</a></p>
</blockquote>

<blockquote>
  <p>“It’s still great for what it’s great at—smaller websites, blogs and is widely used by e-commerce sites.” –<a href="https://snipcart.com/blog/choose-best-static-site-generator">Snipcart</a></p>
</blockquote>

<blockquote>
  <p>“This blog was made with Jekyll” –<a href="https://www.monjibram.com">Benji</a></p>
</blockquote>

<p>Learning all the things you can do with Jekyll is another subject entirely. Here’s a <a href="https://jekyllrb.com/docs/liquid/">single page of Jekyll’s official documentation</a>. It is definitely not the Jekyll team’s finest moment. I can’t throw shade, the contributors are doing most of this for free after all! But how could I know that it does pretty much the same things I do at work on WordPress? I couldn’t. I didn’t.</p>

<h2 id="meta-meta">Meta-meta</h2>
<p>Metadata feels like a good place to start breaking the ‘blog’ idea. In WordPress the most popular metadata tool is called Advanced Custom Fields. ACF allows you to attach images, text, dates, even repeating and iterable internal groups, all within a single page template or custom post type. For each page that uses the template, you can fill in new metadata and create an entirely custom page – but with the same format and style. Hence the word <code class="highlighter-rouge">template</code>.</p>

<p>Custom metadata is not terribly helpful on a blog. Blogs are mostly unique and custom <em>content</em>. The data that surrounds that content is usually filled in with <a href="https://en.wikipedia.org/wiki/Scaffold_(programming)">scaffolding</a>, which follows a lot of specific rules and is very well thought through. So sure, Jekyll has that stuff and it’s easy to understand, but you don’t need to make it. It’s already there.</p>

<p>If you’re coming from a WordPress background, you already know this. You also know you do need custom metadata when you’re making <em>pages</em> for things.</p>

<p>And you can do that! Jekyll and many static site generators use <a href="https://shopify.github.io/liquid/">Liquid</a> to provide metadata in markdown and HTML page <em>layouts</em> (= templates) and page contents. For the purposes of this blog, it’s most often the variables with unique names that are stored on top of each page.</p>

<blockquote>
  <p>I used Liquid to fill in this blockquote.</p>
</blockquote>

<p>ACFs on WordPress are cool because you don’t really have to build everything in WYSIWYG (or write only blogs all day) to make a beautiful page. Liquid on Jekyll is cool because you don’t really have to read through any HTML to build a page. Let’s look at an example base layout template:</p>

<h2 id="example-base_templatehtml">Example: base_template.html</h2>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en-US"</span><span class="nt">&gt;</span>
  {% include header.html %}
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"main-grid"</span><span class="nt">&gt;</span>
      {% include nav.html %}
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inner"</span><span class="nt">&gt;</span>
        Today I am talking about {{ page.fruit }}. I really {{ page.preference }} them, because they {{ page.action }} every time I hear about them. They only cost {{ page.cost }}
        <span class="nt">&lt;br&gt;</span>

        So at the store:
        {% for page in site.pages %}
          {{ page.fruit }} cost {{ page.cost }}
          {% unless forloop.last %}, {% endunless %}
        {% endfor %}

        {{ content }}
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/section&gt;</span>
    {% include footer.html %}
  <span class="nt">&lt;/body&gt;</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p>Liquid is being used in two ways here. It’s including other templates on the page with <code class="highlighter-rouge">{% include %}</code> and it’s providing dynamic page metadata variables inside of mustachey brackets <code class="highlighter-rouge">{{ }}</code>. Those brackets aren’t confined to page variables. One of the most common variables I use on this site is <code class="highlighter-rouge">{{ site.baseurl }}</code> from <code class="highlighter-rouge">config.yml</code>. But for the purposes of page-content, yes, you can have these things on each page!</p>

<h2 id="setting-your-variables-on-the-page">Setting your variables on the page</h2>
<p>Now you’ve got the <strong><em>layout</em></strong>, you can require it in the <strong><em>front matter</em></strong> of each page you want to set for that template. Front matter is written in yaml, so if you’ve ever written a docker file you’re already halfway there. Or… the other way around!</p>

<h3 id="example-pagenamemd">Example: pagename.md</h3>

<figure class="highlight"><pre><code class="language-md" data-lang="md"><span class="nn">---</span>
<span class="c1"># the front matter is separated from rest of the document by three dashes on top and bottom</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">base_template</span> <span class="c1"># the html doc above</span>
<span class="na">fruit</span><span class="pi">:</span> <span class="s">apples</span>
<span class="na">preference</span><span class="pi">:</span> <span class="s">don't care about</span>
<span class="na">action</span><span class="pi">:</span> <span class="s">make me fall asleep</span>
<span class="na">cost</span><span class="pi">:</span> <span class="s">$5</span>

<span class="c1"># you can put arrays here</span>
<span class="na">coolstuff</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">backpack</span>
<span class="pi">-</span> <span class="s">sword of destiny</span>
<span class="pi">-</span> <span class="s">mandarin oranges</span>

<span class="c1"># you can even make associative arrays!? nuts</span>
<span class="na">images</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">alt</span><span class="pi">:</span> <span class="s">copypasta</span>
  <span class="na">url</span><span class="pi">:</span> <span class="s">/assets/images/spaghetti.png</span>
<span class="pi">-</span> <span class="na">alt</span><span class="pi">:</span> <span class="s">codesmells</span>
  <span class="na">url</span><span class="pi">:</span> <span class="s">/assets/images/feet.png</span>

<span class="na">link</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s">https://www.monjibram.com/contact</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Contact Benji</span>
  <span class="na">target</span><span class="pi">:</span> <span class="s">_blank</span>
  <span class="na">class</span><span class="pi">:</span> <span class="s">black-button</span>
<span class="nn">---</span>

Those arrows above are <span class="gs">**all of your dynamic data**</span>. This markdown below will eventually be where the <span class="sb">`{{ content }}`</span> variable is placed. But this section could also be blank.</code></pre></figure>

<h3 id="output">Output:</h3>
<p>Today I am talking about apples. I really don’t care about them, because they make me fall asleep every time I hear about them. They only cost $5
So at the store: apples cost $5, bananas cost $3, asian pears cost $15</p>

<p>Those arrows above are <strong>all of your dynamic data</strong>. This markdown below will eventually be where the <code class="highlighter-rouge">{{ content }}</code> variable is placed. But this section could also be blank.</p>

<h2 id="templates-gonna-template">Templates gonna template</h2>
<p>You can stamp out as many of these templates as you want. In the example above we made 3 pages (with apples, bananas, asian pears), evidenced by the iteration on the final section.</p>

<p>I cannot emphasize enough how exactly the same as WordPress post meta this is, because <em>it is post meta</em>. A free CMS easily adds a graphical interface to the process for people who don’t want to deal in yaml, but the yaml itself is easy to read. <a href="/jam-that-sucker/">It’s not a reason for WordPress.</a></p>

<h2 id="conclusions">Conclusions</h2>
<p>“Unique Custom Content” is such a big deal in SEO. A marketing site with 5 unique but beautiful (if visibly similar) pages is going to be highly optimized. Blogs aren’t the only page style (and certainly aren’t the most efficient) when you’re trying to build that custom product weight for search placement. Make the job easier: template out your custom page builds!</p>]]></content><author><name>Benji Kostenbader</name></author><category term="Tutorials" /><category term="Jamstack" /><summary type="html"><![CDATA[Cutting-edge web technologies don’t always document features. Either they lack the ability to convey the full scope of their power from the first release, or they release new features gradually after the MVP. That’s pretty much the opposite of the old guard of incredible WordPress plugins. A personal favorite static framework of mine is Jekyll, because it’s simple. But I guess it isn’t so simple after all.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/automation.webp" /><media:content medium="image" url="https://www.monjibram.com/assets/images/automation.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Learn AJAX: Part 2</title><link href="https://www.monjibram.com/ajax-part-2/" rel="alternate" type="text/html" title="Learn AJAX: Part 2" /><published>2020-06-05T08:06:00-04:00</published><updated>2020-06-05T08:06:00-04:00</updated><id>https://www.monjibram.com/ajax-part-2</id><content type="html" xml:base="https://www.monjibram.com/ajax-part-2/"><![CDATA[<p>The universally supported base API for AJAX is called <code class="highlighter-rouge">XMLHttpRequest()</code>. We often shorten that to <code class="highlighter-rouge">XHR</code>. It is so very much harder for AJAX newcomers to grasp, mostly because the many parts of the HTTP request get separated out into separate pieces of the XHR. If you mess up any of those parts, you won’t have your data. People want their data. People should read this blog.</p>

<p><em>This is Part 2 of a tutorial on the basics of AJAX, for beginners. You might want to start at <a href="/ajax-part-1/">Part 1</a> if you haven’t already.</em></p>

<blockquote>
  <p><strong>Disclaimer!</strong> <em>This article is for beginners, but it does assume a basic knowledge of HTTP’s structure. If you know the meaning of GET and POST, read on! Otherwise, I highly recommend going straight to the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods">Wikipedia source</a> and boning up.</em></p>
</blockquote>

<p>While I do expect you to know what HTTP requests are, I’m not expecting you to be familiar with our forefathers and their seminal work on making HTTP requests by hand with web servers. You are not (yet) that server gal 🧛‍♀️. You are not (yet) Richmond.</p>

<p><img src="/assets/images/blog/richmond.gif" alt="An Ill Wind is Blowing" title="You might not even know who he is." /></p>

<h2 id="curl-is-really-capitalized-like-that">cURL is Really Capitalized Like That</h2>
<p>In the beginning, there was a thing called cURL. It underpins a lot of HTTP requests from languages like PHP. It still exists, and it’s used in many places. Part of it is worth explaining here, but the rest can always be found <a href="https://curl.haxx.se/docs/httpscripting.html">here</a>.</p>

<p>cURL is cool because it’s a playground for talking to the internet without a GUI. It can be used as a command line tool, and it lets you build custom HTTP requests from your terminal! cURL is a good place to learn about HTTP, which you already know, right? I hope so.</p>

<p>For each section of an HTTP request, cURL has an option. There are naturally many options. They are grouped by type, like <code class="highlighter-rouge">headers</code>, <code class="highlighter-rouge">cookies</code>, <code class="highlighter-rouge">urls</code>, <code class="highlighter-rouge">post-types</code>, and <code class="highlighter-rouge">ports</code>. There are many defaults, but it’s common to need to set more than one of these before executing the actual request. It’s similar in XHR.</p>

<h2 id="but-first-you-must-instantiate">But First, You Must Instantiate!</h2>
<p>In my opinion, XHR is the closest thing that old-timey JavaScript can have to a class. It has a lot of sensitive settings, and there can be more than one at a time, so the first thing you’ll do is use the <code class="highlighter-rouge">XMLHttpRequest()</code> cookie cutter and stamp out a new Object.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>                   <span class="c1">// assign this to a variable to instantiate it</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">POST</span><span class="p">,</span> <span class="nx">yoururl</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">something</span><span class="p">.</span><span class="nx">json</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> <span class="c1">// request-type, url, async (true/false)</span></code></pre></figure>

<h2 id="tell-it-what-you-want">Tell It What You Want</h2>
<p>The next part of a POST request will often require specific headers. It’s possible and common to use these headers to set encoded OAuth keys and values into the request to open up gateways with APIs. It’s also common to use headers to define your data. You know, normal HTTP header things go here. Naturally, this must always be done <em>after</em> you <code class="highlighter-rouge">.open()</code> your request and <em>before</em> you <code class="highlighter-rouge">.send()</code> it.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// What was that .... you wanted more than one header field? Easy, do it as many times as you need:</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Cookie</span><span class="dl">"</span><span class="p">,</span> <span class="dl">'</span><span class="s1">siteName=Monjibram</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Referer</span><span class="dl">"</span><span class="p">,</span> <span class="dl">'</span><span class="s1">https://www.monjibram.com</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<h2 id="make-it-an-event">Make It An Event</h2>
<p>Your response is now today years old! But what happens when it grows up, travels the world, and returns home? You can set your event handler next, with any callbacks you need.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// in plain English: if the request is finished and it received a 200 status</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="nx">XMLHttpRequest</span><span class="p">.</span><span class="nx">DONE</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Request finished. Process asynchronously from here with a callback.</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// There could be a multitude of reasons that something failed. Error log here.</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="wrap-things-up">Wrap Things Up</h2>
<p>All that to send some <code class="highlighter-rouge">formData</code>. If you recall from <a href="/ajax-part-1/">Part 1</a>, we were attempting to AJAX this wee little form:</p>

<form onsubmit="validateAndAjax(event)" style="padding-bottom: 30px;">
  <input id="email" type="email" placeholder="Email!" />
  <input id="submit" type="submit" value="Submit!" />
</form>

<p>Of course you’re welcome to send any sort of data string you please via HTTP. With the <code class="highlighter-rouge">URLSearchParams()</code> API you can even transform JSON and JS Objects into useful parameters.</p>

<p>Whatever happens, you’re now ready to send that little form’s contents out into the big, big world. Give it the boot with <code class="highlighter-rouge">.send()</code>. If this were a GET request, <code class="highlighter-rouge">.send()</code> would accept the parameters on the url you’re looking to pull from. It can also accept <code class="highlighter-rouge">null</code>.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">({</span>
  <span class="na">email</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">email</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span>
  <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Benji</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// and more</span>
  <span class="na">bar</span><span class="p">:</span> <span class="dl">"</span><span class="s2">&lt;3</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">// and more</span>
  <span class="na">baz</span><span class="p">:</span> <span class="dl">"</span><span class="s2">AJAX</span><span class="dl">"</span><span class="p">,</span>  <span class="c1">// and more!</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span></code></pre></figure>

<h2 id="examples-of-xhr-with-get-and-post">Examples of XHR with GET and POST</h2>
<h3 id="post">POST</h3>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">let</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">POST</span><span class="p">,</span> <span class="nx">yoururl</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">something</span><span class="p">.</span><span class="nx">json</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// in plain English: if the request is finished and it received a 200 status</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="nx">XMLHttpRequest</span><span class="p">.</span><span class="nx">DONE</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Request finished. Process asynchronously from here with a callback.</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// There could be a multitude of reasons that something failed. Error log here.</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URLSearchParams</span><span class="p">({</span>
  <span class="na">email</span><span class="p">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">email</span><span class="dl">'</span><span class="p">).</span><span class="nx">value</span><span class="p">,</span>
  <span class="na">foo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Benji</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// and more</span>
  <span class="na">bar</span><span class="p">:</span> <span class="dl">"</span><span class="s2">&lt;3</span><span class="dl">"</span><span class="p">,</span>    <span class="c1">// and more</span>
  <span class="na">baz</span><span class="p">:</span> <span class="dl">"</span><span class="s2">AJAX</span><span class="dl">"</span><span class="p">,</span>  <span class="c1">// and more!</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span></code></pre></figure>

<h3 id="get">GET</h3>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">https://feed.podbean.com/covertocredits/feed.xml</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">podcastAttributes</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="dl">'</span><span class="s1">item</span><span class="dl">'</span><span class="p">);</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">podcastAttributes</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to receive RSS file from the server - file not found.</span><span class="dl">"</span><span class="p">);</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error code </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> received: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">statusText</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span></code></pre></figure>

<h2 id="a-short-rant">A Short Rant</h2>
<p>This was the way I think you should learn about XHR. After jQuery, and before Fetch and Axios.</p>

<p>On the other hand, <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/">this is how Mozilla thinks you should learn XHR</a>. There are no base examples, only a long list of properties and methods. Navigating to <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">Using XHR</a> is a real doozy. It contains no single example of a POST request, but instead jumps off on a multi-section tangent about recreating native form submissions. I usually highly recommend the Moz Docs, but in this case you should approach with caution.</p>

<h2 id="next-time">Next Time…</h2>
<p>We’ve completed the average jQuery AJAX request, and followed through the base XHR request, but two modern AJAX-friendly APIs have been integrated in modern front-end frameworks. The basics of Axios and Fetch will round out our triad of beginner tutorials on asynchronous JavaScript calls.</p>]]></content><author><name>Benji</name></author><category term="Tutorials" /><summary type="html"><![CDATA[The universally supported base API for AJAX is called XMLHttpRequest(). We often shorten that to XHR. It is so very much harder for AJAX newcomers to grasp, mostly because the many parts of the HTTP request get separated out into separate pieces of the XHR. If you mess up any of those parts, you won’t have your data. People want their data. People should read this blog.]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://www.monjibram.com/assets/images/ajax-bottle2.webp" /><media:content medium="image" url="https://www.monjibram.com/assets/images/ajax-bottle2.webp" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>